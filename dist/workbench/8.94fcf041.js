(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{279:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=T(a(287)),n=T(a(2)),l=T(a(41)),u=T(a(5)),o=T(a(10)),d=T(a(4)),p=T(a(6)),s=T(a(313));a(132),a(329);var i=a(1),c=T(i),f=(a(89),a(59)),m=T(a(0)),D=a(295),y=T(a(131)),h=T(a(480)),v=T(a(468)),g=T(a(452)),b=T(a(451));function T(e){return e&&e.__esModule?e:{default:e}}a(411);var E=s.default.Header,k=(s.default.Footer,s.default.Sider),_=s.default.Content,A=[{name:"增加模块"},{name:"增加应用分类"},{name:"增加应用"},{name:"保存"},{name:"取消"},{name:"删除"},{name:"修改"}],x=function(e){function t(e){(0,u.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.handleClick=function(e){var t=void 0;switch(e){case"增加模块":a.actionType=1,a.nodeData=a.props.nodeData,a.optype=a.props.optype;a.props.setNodeData({systypecode:"",moduleid:"",systypename:"",orgtypecode:"",appscope:"",isaccount:!1,supportcloseaccbook:!1,resid:"",dr:0}),a.props.setOpType("module"),a.props.setBillStatus({isEdit:!0,isNew:!0});break;case"增加应用分类":a.actionType=2,a.nodeData=a.props.nodeData,a.optype=a.props.optype;a.props.setNodeData({code:"",name:"",app_desc:"",help_name:""}),a.props.setOpType("classify"),a.props.setBillStatus({isEdit:!0,isNew:!0});break;case"增加应用":a.actionType=3,a.nodeData=a.props.nodeData,a.optype=a.props.optype;a.props.setAppData({appParamVOs:[],appButtonVOs:[]}),a.props.setNodeData({code:"",name:"",orgtypecode:"",funtype:"",app_desc:"",help_name:"",isenable:!1,iscauserusable:!1,uselicense_load:!0,pk_group:"",width:1,height:1,target_path:"",apptype:"",image_src:""}),a.props.setOpType("app"),a.props.setBillStatus({isEdit:!0,isNew:!0});break;case"保存":var r=a.props.getFromData(),l=a.props.billStatus.isNew,u=void 0;switch(a.actionType){case 1:t=l?"/nccloud/platform/appregister/insertmodule.do":"/nccloud/platform/appregister/editmodule.do",a.props.parentData&&(r.parentcode=a.props.parentData),u=r;break;case 2:t=l?"/nccloud/platform/appregister/insertapp.do":"/nccloud/platform/appregister/editapp.do","module"===a.optype?r.parent_id=a.nodeData.moduleid:r.parent_id=a.props.parentData,u=(0,n.default)({},a.props.nodeData,r);break;case 3:t=l?"/nccloud/platform/appregister/insertapp.do":"/nccloud/platform/appregister/editapp.do","classify"===a.optype?r.parent_id=a.nodeData.moduleid:r.parent_id=a.props.parentData,u=(0,n.default)({},a.props.nodeData,r)}(0,y.default)({url:t,data:u,success:function(e){var t=e.data;if(t.success&&t.data){if(l){if("classify"===a.props.optype||"app"===a.props.optype){var r={moduleid:t.data.pk_appregister,parentcode:a.props.parentData,systypecode:t.data.code,systypename:t.data.name};a.props.addTreeData(r)}else a.props.addTreeData(u);a.props.setNodeData(t.data)}else{if("classify"===a.props.optype||"app"===a.props.optype){var n={moduleid:u.pk_appregister,parentcode:a.props.parentData,systypecode:u.code,systypename:u.name};a.props.updateTreeData(n)}else a.props.updateTreeData(u);a.props.setNodeData(u)}a.props.setBillStatus({isEdit:!1,isNew:!1})}}});break;case"取消":a.props.setOpType(a.optype),a.props.setNodeData(a.nodeData),a.props.setBillStatus({isEdit:!1,isNew:!1});break;case"删除":var o=void 0,d=void 0,p=a.props.nodeData,s=p.pk_appregister,i=p.code,c=p.name;switch(a.props.optype){case"module":t="/nccloud/platform/appregister/deletemodule.do",o={moduleid:a.props.nodeData.moduleid},d=a.props.nodeData;break;case"classify":case"app":t="/nccloud/platform/appregister/deleteapp.do",o={pk_appregister:a.props.nodeData.pk_appregister},d={moduleid:s,parentcode:a.props.parentData,systypecode:i,systypename:c}}(0,y.default)({url:t,data:o,success:function(e){var t=e.data;t.success&&t.data&&a.props.delTreeData(d)}}),console.log("删除 "+d);break;case"修改":switch(a.nodeData=a.props.nodeData,a.optype=a.props.optype,console.log(a.optype),a.optype){case"module":a.actionType=1;break;case"classify":a.actionType=2;break;case"app":a.actionType=3}a.props.setBillStatus({isEdit:!0,isNew:!1})}},a.creatBtn=function(e){var t=e.name;if(e.isShow)return c.default.createElement(r.default,{className:"margin-right-10",type:"primary",onClick:a.handleClick.bind(a,t)},t)},a.switchFrom=function(){switch(a.props.optype){case"module":return c.default.createElement(v.default,null);case"classify":return c.default.createElement(g.default,null);case"app":return c.default.createElement(b.default,null);default:return""}},a.setBtnsShow=function(e){var t=e.name,r=a.props,l=r.optype,u=r.parentData,o=r.billStatus,d=o.isEdit,p=o.isNew,s=!1;switch(t){case"增加模块":s=!d&&(""===l||"module"===l);break;case"增加应用分类":s=!d&&!!("module"===l&&u&&2===u.length||"classify"===l&&u&&4===u.length);break;case"增加应用":s=!d&&("classify"===l||"app"===l);break;case"保存":case"取消":s=!!d;break;case"删除":s=!p&&""!==l;break;case"修改":s=!p&&!d&&""!==l}return(0,n.default)({},e,{isShow:s})},a.state={siderHeight:"280"},a.nodeData,a.optype,a.actionType,a}return(0,p.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){var e=this;window.onresize=function(){var t=document.querySelector(".ant-layout-content").offsetHeight;e.setState({siderHeight:t})}}},{key:"render",value:function(){var e=this;return c.default.createElement(s.default,{className:"nc-workbench-iframe"},c.default.createElement(E,null,A.map(function(t,a){return t=e.setBtnsShow(t),e.creatBtn(t)})),c.default.createElement(s.default,{height:"100%"},c.default.createElement(k,{width:320,height:"100%",style:{background:"#fff",width:"500px","min-height":"calc(100vh - 64px)",height:this.state.siderHeight+"px",overflowY:"auto",padding:"20px"}},c.default.createElement(h.default,null)),c.default.createElement(_,{style:{padding:"20px",minHeight:280}},this.switchFrom())))}}]),t}(i.Component);x.PropTypes={setTreeData:m.default.func.isRequired,optype:m.default.string.isRequired,billStatus:m.default.object.isRequired,setBillStatus:m.default.object.isRequired,parentData:m.default.string.isRequired,setOpType:m.default.func.isRequired,nodeData:m.default.object.isRequired,setAppData:m.default.func.isRequired,getFromData:m.default.func.isRequired,addTreeData:m.default.func.isRequired,delTreeData:m.default.func.isRequired,updateTreeData:m.default.func.isRequired},t.default=(0,f.connect)(function(e){return{optype:e.AppRegisterData.optype,billStatus:e.AppRegisterData.billStatus,parentData:e.AppRegisterData.parentData,nodeData:e.AppRegisterData.nodeData,getFromData:e.AppRegisterData.getFromData,addTreeData:e.AppRegisterData.addTreeData,delTreeData:e.AppRegisterData.delTreeData,updateTreeData:e.AppRegisterData.updateTreeData}},{setNodeData:D.setNodeData,setBillStatus:D.setBillStatus,setOpType:D.setOpType,setAppData:D.setAppData})(x)},295:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFromDataFunc=t.setAppData=t.setAppType=t.setParentData=t.setBillStatus=t.setOpType=t.delTreeData=t.addTreeData=t.updateTreeData=t.setNodeData=t.clearData=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(136));t.clearData=function(){return{type:r.CLEARDATA}},t.setNodeData=function(e){return{type:r.SETNODEDATA,data:e}},t.updateTreeData=function(e){return{type:r.UPDATENODEDATA,updateTreeData:e}},t.addTreeData=function(e){return{type:r.ADDNODEDATA,addTreeData:e}},t.delTreeData=function(e){return{type:r.DELNODEDATA,delTreeData:e}},t.setOpType=function(e){return{type:r.OPERATIONTYPE,optype:e}},t.setBillStatus=function(e){return{type:r.BILLSTATUS,billStatus:e}},t.setParentData=function(e){return{type:r.PARENTDATA,parentData:e}},t.setAppType=function(e){return{type:r.APPTYPE,appType:e}},t.setAppData=function(e){return{type:r.APPDATA,appData:e}},t.getFromDataFunc=function(e){return{type:r.GETFROMDATA,getFromData:e}}},410:function(e,t,a){(e.exports=a(17)(!1)).push([e.i,"body{background-color:#f0f2f5}.from-card{padding:24px;background:#fbfbfb;border:1px solid #d9d9d9;border-radius:6px}.from-card .ant-form-item{display:flex}.from-card .ant-form-item-control-wrapper{flex:1}",""])},411:function(e,t,a){var r=a(410);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(23)(r,n);r.locals&&(e.exports=r.locals)},450:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=T(a(2)),n=T(a(449)),l=T(a(409)),u=T(a(287)),o=T(a(41)),d=T(a(5)),p=T(a(10)),s=T(a(4)),i=T(a(6)),c=T(a(289)),f=T(a(408));a(402),a(404),a(132),a(130),a(414);var m=a(1),D=T(m),y=a(59),h=T(a(0)),v=a(295),g=T(a(293)),b=T(a(131));function T(e){return e&&e.__esModule?e:{default:e}}var E=f.default.TabPane,k=[{name:"新增行"}],_=function(e){var t=e.editable,a=e.value,r=e.onChange;return D.default.createElement("div",null,t?D.default.createElement(c.default,{style:{margin:"-5px 0"},value:a,onChange:function(e){return r(e.target.value)}}):a)},A=function(e){function t(e){(0,d.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.createBtns=function(){return k.map(function(e,t){if((e=a.setBtnsShow(e)).isShow)return D.default.createElement(u.default,{onClick:function(){return a.add()},style:{"margin-left":"8px"}},e.name)})},a.setBtnsShow=function(e){var t=a.props.billStatus.isEdit;return e.isShow=!!t,e},a.createTabPane=function(){var e=a.props.appData,t=e.appButtonVOs,r=void 0===t?[]:t,n=e.appParamVOs,u=void 0===n?[]:n,o=g.default.cloneDeep(a.columnsBtn);a.props.billStatus.isEdit&&o.push(a.operationCol);var d=[D.default.createElement(E,{tab:"按钮注册",key:"1"},D.default.createElement(l.default,{bordered:!0,pagination:!1,rowKey:"num",dataSource:r.map(function(e,t){return e.num=t+1,e}),columns:o,scroll:{y:300},size:"middle"}))];if(2===a.props.appType){var p=g.default.cloneDeep(a.columnsPar);a.props.billStatus.isEdit&&p.push(a.operationCol),d.push(D.default.createElement(E,{tab:"参数注册",key:"2"},D.default.createElement(l.default,{bordered:!0,pagination:!1,rowKey:"num",dataSource:u.map(function(e,t){return e.num=t+1,e}),columns:p,scroll:{y:300},size:"middle"})))}return d},a.state={activeKey:"1"},a.columnsBtn=[{title:"序号",dataIndex:"num",width:"5%"},{title:"按钮编码",dataIndex:"btncode",width:"15%",render:function(e,t){return a.renderColumns(e,t,"btncode")}},{title:"按钮名称",dataIndex:"btnname",width:"15%",render:function(e,t){return a.renderColumns(e,t,"btnname")}},{title:"pagecode",dataIndex:"pagecode",width:"10%",render:function(e,t){return a.renderColumns(e,t,"pagecode")}},{title:"按钮功能描述",dataIndex:"btndesc",width:"40%",render:function(e,t){return a.renderColumns(e,t,"btndesc")}}],a.columnsPar=[{title:"序号",dataIndex:"num",width:"5%"},{title:"参数名称",dataIndex:"paramname",width:"25%",render:function(e,t){return a.renderColumns(e,t,"paramname")}},{title:"参数值",width:"55%",dataIndex:"paramvalue",render:function(e,t){return a.renderColumns(e,t,"paramvalue")}}],a.operationCol={title:"操作",dataIndex:"operation",render:function(e,t){var r=t.editable;return D.default.createElement("div",{className:"editable-row-operations"},r?D.default.createElement("span",null,D.default.createElement("a",{className:"margin-right-5",onClick:function(){return a.save(t)}},"保存"),D.default.createElement(n.default,{title:"确定取消?",onConfirm:function(){return a.cancel(t)}},D.default.createElement("a",{className:"margin-right-5"},"取消"))):D.default.createElement("span",null,D.default.createElement("a",{className:"margin-right-5",onClick:function(){return a.edit(t)}},"编辑"),D.default.createElement(n.default,{title:"确定删除?",onConfirm:function(){return a.del(t)}},D.default.createElement("a",{className:"margin-right-5"},"删除"))))}},a.cacheData,a}return(0,i.default)(t,e),(0,p.default)(t,[{key:"renderColumns",value:function(e,t,a){var r=this;return t=g.default.cloneDeep(t),D.default.createElement(_,{editable:t.editable,value:e,onChange:function(e){return r.handleChange(e,t,a)}})}},{key:"handleChange",value:function(e,t,a){var r=this.getNewData(),n=r.filter(function(e){return t.num===e.num})[0];n&&(n[a]=e,this.setNewData(r))}},{key:"edit",value:function(e){var t=this.getNewData();this.cacheData=g.default.cloneDeep(t);var a=t.filter(function(t){return e.num===t.num})[0];a&&(a.editable=!0,this.setNewData(t))}},{key:"del",value:function(e){var t=this;if(e.pk_btn||e.pk_param){var a=void 0,r=void 0,n=this.state.activeKey,l=this.getNewData();"1"===n?(a="/nccloud/platform/appregister/deletebutton.do",r={pk_btn:e.pk_btn}):(a="/nccloud/platform/appregister/deleteparam.do",r={pk_param:e.pk_param}),(0,b.default)({url:a,data:r,success:function(a){var r=a.data;r.success&&r.data&&(e.pk_btn?g.default.remove(l,function(t){return e.pk_btn===t.pk_btn}):g.default.remove(l,function(t){return e.pk_param===t.pk_param}),console.log(l),t.setNewData(l),t.cacheData=g.default.cloneDeep(l))}})}}},{key:"save",value:function(e){var t=this,a=this.state.activeKey,n=this.getNewData(),l=void 0,u=void 0,o=n.filter(function(t){return e.num===t.num})[0];o&&(l=o.pk_btn||o.pk_param?"1"===a?"/nccloud/platform/appregister/editbutton.do":"/nccloud/platform/appregister/editparam.do":"1"===a?"/nccloud/platform/appregister/insertbutton.do":"/nccloud/platform/appregister/insertparam.do",u=(0,r.default)({},o),(0,b.default)({url:l,data:u,success:function(e){var a=e.data;a.success&&a.data&&(delete o.editable,u.pk_btn||u.pk_param?(n.map(function(e,t){return u.pk_btn===e.pk_btn||u.pk_param===e.pk_param?(0,r.default)({},e,u):e}),t.setNewData(n)):(n[n.length-1]=a.data,t.setNewData(n)),t.cacheData=g.default.cloneDeep(n))}}))}},{key:"cancel",value:function(e){var t=this.getNewData().filter(function(t){return e.num===t.num})[0];t&&(delete t.editable,this.setNewData(this.cacheData))}},{key:"add",value:function(){var e=this.state.activeKey,t=this.props.nodeData.pk_appregister,a=this.getNewData();this.cacheData=g.default.cloneDeep(a),"1"===e?a.push({editable:!0,btncode:"",btnname:"",btndesc:"",parent_id:t,isenable:!0,pagecode:""}):a.push({editable:!0,paramname:"",paramvalue:"",parentid:t}),this.setNewData(a)}},{key:"getNewData",value:function(){var e=this.state.activeKey,t=this.props.appData,a=t.appParamVOs,r=t.appButtonVOs;return"1"===e?g.default.cloneDeep(r):g.default.cloneDeep(a)}},{key:"setNewData",value:function(e){var t=this.state.activeKey,a=this.props.appData,r=a.appParamVOs,n=a.appButtonVOs;"1"===t?this.props.setAppData({appParamVOs:r,appButtonVOs:e}):this.props.setAppData({appButtonVOs:n,appParamVOs:e})}},{key:"render",value:function(){var e=this;return D.default.createElement(f.default,{onChange:function(t){e.setState({activeKey:t})},type:"card",tabBarExtraContent:this.createBtns()},this.createTabPane())}}]),t}(m.Component);A.PropTypes={appType:h.default.number.isRequired,billStatus:h.default.object.isRequired,appData:h.default.object.isRequired,setAppData:h.default.object.isRequired,nodeData:h.default.object.isRequired},t.default=(0,y.connect)(function(e){return{appType:e.AppRegisterData.appType,billStatus:e.AppRegisterData.billStatus,appData:e.AppRegisterData.appData,nodeData:e.AppRegisterData.nodeData}},{setAppData:v.setAppData})(A)},451:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=T(a(325)),n=T(a(322)),l=T(a(289)),u=T(a(291)),o=T(a(41)),d=T(a(5)),p=T(a(10)),s=T(a(4)),i=T(a(6)),c=T(a(133)),f=T(a(315));a(318),a(316),a(130),a(296),a(134),a(312);var m=a(1),D=T(m),y=a(59),h=T(a(0)),v=(T(a(293)),a(295)),g=T(a(131)),b=T(a(450));function T(e){return e&&e.__esModule?e:{default:e}}var E=f.default.Item,k=c.default.Option,_=function(e){function t(e,a){(0,d.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,a));return r.optionShow=function(e,t){var a=e.find(function(e){return e.value===t});if(a)return a.text},r.getOptionsData=function(e){var t=r.state.DOMDATA;(0,g.default)({url:"nccloud/platform/appregister/queryorgtype.do",success:function(a){var n=a.data;if(n.success&&n.data){var l=n.data.rows;l=l.map(function(e,t){return{value:e.refpk,text:e.refname}}),t.map(function(t,a){return t.code===e&&(t.options=l),t}),r.setState({DOMDATA:t})}}})},r.createOption=function(e){return e.map(function(e,t){return D.default.createElement(k,{value:e.value},e.text)})},r.createDom=function(e,t){var a=r.props.form.getFieldDecorator,n=r.props.billStatus.isEdit,o=e.lable,d=e.type,p=e.code;switch(d){case"select":return n?D.default.createElement(E,{label:o,hasFeedback:!0},a(p,{initialValue:t[p],rules:[{required:!0,message:"请选择"+o}]})(D.default.createElement(c.default,{placeholder:"请选择"+o},r.createOption(e.options)))):D.default.createElement(E,{label:o},D.default.createElement("span",{className:"ant-form-text"},r.optionShow(e.options,t[p])));case"checkbox":return D.default.createElement(E,null,a(p,{valuePropName:"checked",initialValue:t[p]})(D.default.createElement(u.default,{disabled:!n},o)));default:return n?D.default.createElement(E,{label:o},a(p,{initialValue:t[p],rules:[{required:!0,message:"Input something!"}]})(D.default.createElement(l.default,{placeholder:"placeholder"}))):D.default.createElement(E,{label:o},D.default.createElement("span",{className:"ant-form-text"},t[p]))}},r.getFromData=function(){return(0,r.props.form.getFieldsValue)()},r.state={DOMDATA:[{lable:"应用编码",type:"input",code:"code"},{lable:"应用名称",type:"input",code:"name"},{lable:"组织类型",type:"select",code:"orgtypecode",options:[]},{lable:"功能点类型",type:"select",code:"funtype",options:[{value:0,text:"业务类应用"},{value:1,text:"管理类应用"},{value:2,text:"系统类应用"},{value:3,text:"管理+业务类应用"}]},{lable:"应用描述",type:"input",code:"app_desc"},{lable:"帮助文件名",type:"input",code:"help_name"},{lable:"关联元数据ID",type:"select",code:"querymdids",options:[]},{lable:"是否启用",type:"checkbox",code:"isenable"},{lable:"是否CA用户可用",type:"checkbox",code:"iscauserusable"},{lable:"是否加载占用",type:"checkbox",code:"uselicense_load"},{lable:"所属集团",type:"input",code:"pk_group"},{lable:"应用类型",type:"select",code:"apptype",options:[{value:1,text:"小应用"},{value:2,text:"小部件"}]},{lable:"应用宽",type:"input",code:"width"},{lable:"应用高",type:"input",code:"height"},{lable:"目标跳转路径",type:"input",code:"target_path",md:24,lg:24,xl:24},{lable:"图标路径",type:"input",code:"image_src",md:24,lg:24,xl:24}]},r}return(0,i.default)(t,e),(0,p.default)(t,[{key:"getFields",value:function(e){var t=this,a=this.state.DOMDATA;if(!e.systypename){var r=[];return a.map(function(a,l){a.lable;var u=a.md,o=void 0===u?24:u,d=a.lg,p=void 0===d?12:d,s=a.xl,i=void 0===s?8:s;r.push(D.default.createElement(n.default,{md:o,lg:p,xl:i,key:l},t.createDom(a,e)))}),r}}},{key:"componentWillMount",value:function(){this.props.getFromDataFunc(this.getFromData),this.getOptionsData("orgtypecode")}},{key:"render",value:function(){return D.default.createElement("div",null,D.default.createElement(f.default,{className:"from-card"},D.default.createElement(r.default,{gutter:24},this.getFields(this.props.nodeData))),D.default.createElement("div",{style:{"margin-top":"16px",background:"#ffffff",padding:"10px","border-radius":"6px"}},D.default.createElement(b.default,null)))}}]),t}(m.Component);(_=f.default.create()(_)).PropTypes={updateTreeData:h.default.func.isRequired,nodeData:h.default.object.isRequired,billStatus:h.default.object.isRequired,setNodeData:h.default.func.isRequired,setAppData:h.default.func.isRequired,getFromDataFunc:h.default.func.isRequired},t.default=(0,y.connect)(function(e){var t=e.AppRegisterData;return{nodeData:t.nodeData,updateTreeData:t.updateTreeData,billStatus:t.billStatus}},{setNodeData:v.setNodeData,setAppData:v.setAppData,getFromDataFunc:v.getFromDataFunc})(_)},452:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=g(a(325)),n=g(a(322)),l=g(a(289)),u=g(a(291)),o=g(a(41)),d=g(a(5)),p=g(a(10)),s=g(a(4)),i=g(a(6)),c=g(a(133)),f=g(a(315));a(318),a(316),a(130),a(296),a(134),a(312);var m=a(1),D=g(m),y=a(59),h=g(a(0)),v=a(295);function g(e){return e&&e.__esModule?e:{default:e}}var b=f.default.Item,T=c.default.Option,E=[{lable:"应用编码",type:"input",code:"code"},{lable:"应用名称",type:"input",code:"name"},{lable:"应用描述",type:"input",code:"app_desc",md:24,lg:24,xl:12},{lable:"帮助文件名",type:"input",code:"help_name",md:24,lg:24,xl:12}],k=function(e){function t(e,a){(0,d.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,a));return r.createDom=function(e,t){var a=r.props.form.getFieldDecorator,n=r.props.billStatus.isEdit,o=e.lable,d=e.type,p=e.code;switch(d){case"select":return n?D.default.createElement(b,{label:o,hasFeedback:!0},a(p,{initialValue:t[p],rules:[{required:!0,message:"Please select your country!"}]})(D.default.createElement(c.default,{placeholder:"Please select a country"},D.default.createElement(T,{value:"0"},"全局"),D.default.createElement(T,{value:"1"},"集团")))):D.default.createElement(b,{label:o},D.default.createElement("span",{className:"ant-form-text"},t[p]));case"checkbox":return D.default.createElement(b,null,a(p,{valuePropName:"checked",initialValue:t[p]})(D.default.createElement(u.default,{disabled:!n},o)));default:return n?D.default.createElement(b,{label:o},a(p,{initialValue:t[p],rules:[{required:!0,message:"Input something!"}]})(D.default.createElement(l.default,{placeholder:"placeholder"}))):D.default.createElement(b,{label:o},D.default.createElement("span",{className:"ant-form-text"},t[p]))}},r.getFromData=function(){return(0,r.props.form.getFieldsValue)()},r}return(0,i.default)(t,e),(0,p.default)(t,[{key:"getFields",value:function(e){var t=this,a=[];return E.map(function(r,l){r.lable;var u=r.md,o=void 0===u?24:u,d=r.lg,p=void 0===d?12:d,s=r.xl,i=void 0===s?12:s;a.push(D.default.createElement(n.default,{md:o,lg:p,xl:i,key:l},t.createDom(r,e)))}),a}},{key:"componentWillMount",value:function(){this.props.getFromDataFunc(this.getFromData)}},{key:"render",value:function(){return D.default.createElement(f.default,{className:"from-card"},D.default.createElement(r.default,{gutter:24},this.getFields(this.props.nodeData)))}}]),t}(m.Component);(k=f.default.create()(k)).PropTypes={updateTreeData:h.default.func.isRequired,nodeData:h.default.object.isRequired,billStatus:h.default.object.isRequired,getFromDataFunc:h.default.func.isRequired},t.default=(0,y.connect)(function(e){var t=e.AppRegisterData;return{nodeData:t.nodeData,updateTreeData:t.updateTreeData,billStatus:t.billStatus}},{getFromDataFunc:v.getFromDataFunc})(k)},468:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=b(a(325)),n=b(a(322)),l=b(a(289)),u=b(a(291)),o=b(a(41)),d=b(a(5)),p=b(a(10)),s=b(a(4)),i=b(a(6)),c=b(a(133)),f=b(a(315));a(318),a(316),a(130),a(296),a(134),a(312);var m=a(1),D=b(m),y=a(59),h=b(a(0)),v=a(295),g=b(a(131));function b(e){return e&&e.__esModule?e:{default:e}}var T=f.default.Item,E=c.default.Option,k=function(e){function t(e,a){(0,d.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,a));return r.getOptionsData=function(e){var t=r.state.DOMDATA;(0,g.default)({url:"nccloud/platform/appregister/queryorgtype.do",success:function(a){var n=a.data;if(n.success&&n.data){var l=n.data.rows;l=l.map(function(e,t){return{value:e.refpk,text:e.refname}}),t.map(function(t,a){return t.code===e&&(t.options=l),t}),console.log(t),r.setState({DOMDATA:t})}}})},r.createOption=function(e){return e.map(function(e,t){return D.default.createElement(E,{value:e.value},e.text)})},r.optionShow=function(e,t){var a=e.find(function(e){return e.value===t});if(a)return a.text},r.createDom=function(e,t){var a=r.props.form.getFieldDecorator,n=r.props.billStatus.isEdit,o=e.lable,d=e.type,p=e.code;switch(d){case"select":return n?D.default.createElement(T,{label:o,hasFeedback:!0},a(p,{initialValue:t[p],rules:[{required:!0,message:"请选择"+o}]})(D.default.createElement(c.default,{placeholder:"请选择"+o},r.createOption(e.options)))):D.default.createElement(T,{label:o},D.default.createElement("span",{className:"ant-form-text"},r.optionShow(e.options,t[p])));case"checkbox":return D.default.createElement(T,null,a(p,{valuePropName:"checked",initialValue:t[p]})(D.default.createElement(u.default,{disabled:!n},o)));default:return n?D.default.createElement(T,{label:o},a(p,{initialValue:t[p],rules:[{required:!0,message:"Input something!"}]})(D.default.createElement(l.default,{placeholder:"placeholder"}))):D.default.createElement(T,{label:o},D.default.createElement("span",{className:"ant-form-text"},t[p]))}},r.getFromData=function(){return(0,r.props.form.getFieldsValue)()},r.state={DOMDATA:[{lable:"模块编码",type:"input",code:"systypecode"},{lable:"模块号",type:"input",code:"moduleid"},{lable:"模块名称",type:"input",code:"systypename"},{lable:"对应模块号",type:"input",code:"devmodule"},{lable:"应用范围",type:"select",code:"appscope",options:[{value:0,text:"全局"},{value:1,text:"集团"}]},{lable:"组织类型",type:"select",code:"orgtypecode",options:[]},{lable:"多语字段",type:"input",code:"resid"},{lable:"是否支持开关帐设置",type:"checkbox",code:"supportcloseaccbook"},{lable:"是否发送会计平台",type:"checkbox",code:"isaccount"}]},r}return(0,i.default)(t,e),(0,p.default)(t,[{key:"getFields",value:function(e){var t=this,a=[];return this.state.DOMDATA.map(function(r,l){r.lable;var u=r.md,o=void 0===u?24:u,d=r.lg,p=void 0===d?12:d,s=r.xl,i=void 0===s?8:s;a.push(D.default.createElement(n.default,{md:o,lg:p,xl:i,key:l},t.createDom(r,e)))}),a}},{key:"componentDidMount",value:function(){this.props.getFromDataFunc(this.getFromData),this.getOptionsData("orgtypecode")}},{key:"render",value:function(){return D.default.createElement(f.default,{className:"from-card"},D.default.createElement(r.default,{gutter:24},this.getFields(this.props.nodeData)))}}]),t}(m.Component);(k=f.default.create()(k)).PropTypes={updateTreeData:h.default.func.isRequired,nodeData:h.default.object.isRequired,billStatus:h.default.object.isRequired,getFromDataFunc:h.default.func.isRequired},t.default=(0,y.connect)(function(e){var t=e.AppRegisterData;return{nodeData:t.nodeData,updateTreeData:t.updateTreeData,billStatus:t.billStatus}},{getFromDataFunc:v.getFromDataFunc})(k)},480:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(a(138)),n=h(a(41)),l=h(a(5)),u=h(a(10)),o=h(a(4)),d=h(a(6)),p=h(a(289)),s=h(a(406));a(130),a(478);var i=a(1),c=h(i),f=a(59),m=h(a(0)),D=a(295),y=h(a(131));h(a(475));function h(e){return e&&e.__esModule?e:{default:e}}var v=s.default.TreeNode,g=p.default.Search,b=[{key:"0",systypename:"应用节点",moduleid:"",text:"应用节点",children:[]}],T=function(e){function t(e,a){(0,l.default)(this,t);var u=(0,o.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e,a));return u.reqTreeData=function(){(0,y.default)({url:"/nccloud/platform/appregister/querymodules.do",success:function(e){var t=e.data;t.success&&t.data.length>0&&u.setState({treeDataArray:t.data},u.restoreTreeData)}})},u.addTreeData=function(e){var t=u.state,a=t.treeDataArray,r=t.selectedKeys;r=[],a.push(e),r.push(e.moduleid),u.setState({treeDataArray:a,selectedKeys:r},u.restoreTreeData)},u.delTreeData=function(e){console.log(e);var t=u.state,a=t.treeDataArray,r=t.selectedKeys;r=[],a=a.filter(function(t){return t.moduleid!==e.moduleid}),console.log(a),u.setState({treeDataArray:a,selectedKeys:r},u.restoreTreeData)},u.updateNodeData=function(e){var t=u.state.treeDataArray;t=t.map(function(t,a){return t.moduleid===e.moduleid&&(t=e),t}),u.setState({treeDataArray:t},u.restoreTreeData)},u.restoreTreeData=function(){var e=u.state,t=e.treeData,a=e.treeDataArray,r=E(a),n=r.treeArray,l=r.treeObj;for(var o in l)if(l.hasOwnProperty(o)){var d=l[o];d.length>0&&(l[o]=d.map(function(e,t){return l[e.moduleid]&&(e.children=l[e.moduleid]),e}))}n=n.map(function(e,t){return l[e.moduleid]&&(e.children=l[e.moduleid]),e}),t[0].children=r.treeArray,t=k(t),u.setState({treeData:t})},u.onExpand=function(e){u.setState({expandedKeys:e,autoExpandParent:!1})},u.onChange=function(e){var t=e.target.value;u.setState({expandedKeys:expandedKeys,searchValue:t,autoExpandParent:!0})},u.onSelect=function(e,t){var a=u.state.selectedKeys;if(a=e,u.setState({selectedKeys:a}),0!==e.length)if(u.props.setBillStatus({isNew:!1,isEdit:!1}),"0"===(e=e[e.length-1]))u.props.setNodeData(""),u.props.setOpType(""),u.props.setParentData(null);else{var n=u.state.treeDataArray.find(function(t){if(t.key===e)return t});n.moduleid.length<=4?u.props.setOpType("module"):(0,y.default)({url:"/nccloud/platform/appregister/query.do",data:{pk_appregister:e},success:function(e){var t=e.data;if(t.success&&t.data){n.parentcode.length>4?u.props.setOpType("app"):u.props.setOpType("classify");var a=t.data,r=a.appRegisterVO,l=a.appButtonVOs,o=a.appParamVOs;u.props.setAppData({appButtonVOs:l,appParamVOs:o}),u.props.setNodeData(r)}}}),(n=(0,r.default)({},n)).children&&delete n.children,n.parentcode?u.props.setParentData(n.parentcode):u.props.setParentData(null),u.props.setNodeData(n),u.props.updateTreeData(u.updateNodeData)}},u.state={expandedKeys:[],selectedKeys:[],treeDataArray:[],treeData:[],searchValue:"",autoExpandParent:!0},u}return(0,d.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.state.treeData;e=b,this.setState({treeData:e},this.reqTreeData),this.props.addTreeData(this.addTreeData),this.props.delTreeData(this.delTreeData)}},{key:"render",value:function(){var e=this.state,t=e.expandedKeys,a=e.searchValue,r=e.autoExpandParent,n=e.selectedKeys,l=e.treeData;return c.default.createElement("div",null,c.default.createElement(g,{style:{marginBottom:8},placeholder:"Search",onChange:this.onChange}),l.length>0&&l[0].children.length>0&&c.default.createElement(s.default,{showLine:!0,onExpand:this.onExpand,expandedKeys:t,onSelect:this.onSelect,autoExpandParent:r,selectedKeys:n},function e(t){return t.map(function(t){var r=t.text,n=t.key,l=t.children,u=r.indexOf(a),o=r.substr(0,u),d=r.substr(u+a.length),p=u>-1?c.default.createElement("span",null,o,c.default.createElement("span",{style:{color:"#f50"}},a),d):c.default.createElement("div",null,c.default.createElement("span",null,r));return l?c.default.createElement(v,{key:n,title:p},e(l)):c.default.createElement(v,{key:n,title:p})})}(l)))}}]),t}(i.Component),E=function(e){var t=[],a={};return e.map(function(e,r){var n=e.parentcode,l=e.moduleid,u=e.systypename,o=e.systypecode;l.length>4?e.text=o+" "+u:e.text=l+" "+u,e.key=l,n?(a[n]||(a[n]=[]),a[n].push(e)):(e.children=[],t.push(e))}),{treeArray:t,treeObj:a}},k=function e(t){return t.map(function(t,a){return(t=(0,r.default)({},t)).children?(t.isLeaf=!1,t.children=e(t.children)):t.isLeaf=!0,t})};T.PropTypes={setNodeData:m.default.func.isRequired,updateTreeData:m.default.func.isRequired,setOpType:m.default.func.isRequired,setBillStatus:m.default.func.isRequired,setParentData:m.default.func.isRequired,setAppData:m.default.func.isRequired,addTreeData:m.default.func.isRequired,delTreeData:m.default.func.isRequired},t.default=(0,f.connect)(function(e){return{}},{setNodeData:D.setNodeData,updateTreeData:D.updateTreeData,setOpType:D.setOpType,setBillStatus:D.setBillStatus,setParentData:D.setParentData,setAppData:D.setAppData,addTreeData:D.addTreeData,delTreeData:D.delTreeData})(T)}}]);