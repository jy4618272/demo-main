(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{222:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=h(r(27)),i=h(r(26)),n=h(r(25)),o=h(r(24)),u=h(r(23)),l=r(1),p=h(l),s=(r(69),r(41)),c=(h(r(0)),r(244));h(r(238)),h(r(241));r(357);var d=r(257),f=h(r(355)),g=h(r(332)),m=h(r(261));function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){(0,i.default)(this,t);var r=(0,o.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return r.state={currEditID:"",groups:[{pk_app_group:"group1",groupname:"分组1",type:"group",cards:[{pk_appregister:1,type:1,GridX:0,GridY:0,w:1,h:1,text:"Write a cool JS library"},{pk_appregister:2,type:1,GridX:1,GridY:0,w:2,h:2,text:"Make it generic enough"},{pk_appregister:3,type:1,GridX:3,GridY:0,w:1,h:1,text:"Make it generic enough"},{pk_appregister:4,type:1,GridX:0,GridY:1,w:1,h:1,text:"Make it generic enough"},{pk_appregister:5,type:1,GridX:4,GridY:0,w:1,h:1,text:"Make it generic enough"}]},{pk_app_group:"group2",groupname:"分组2",type:"group",cards:[{pk_appregister:6,type:1,GridX:0,GridY:0,w:1,h:1,text:"Make it generic enough"},{pk_appregister:7,type:1,GridX:1,GridY:0,w:1,h:1,text:"Make it generic enough"}]},{pk_app_group:"group3",groupname:"分组3",type:"group",cards:[{pk_appregister:8,type:1,GridX:0,GridY:0,w:1,h:1,text:"Make it generic enough"},{pk_appregister:9,type:1,GridX:1,GridY:0,w:1,h:1,text:"Make it generic enough"}]}]},r}return(0,u.default)(t,e),(0,n.default)(t,[{key:"onDrop",value:function(e,t){if(e.type!==t.type){for(var r=this.state.groups,a=void 0,i=void 0,n=void 0,o=void 0,u=0,l=r.length;u<l;u++){r[u].pk_app_group===t.id&&(i=u);for(var p=0,s=r[u].cards.length;p<s;p++){var c=r[u].cards;c[p].pk_appregister===e.id&&(a=c[p],n=p,o=u)}}r[o].cards.splice(n,1),r[i].cards.push(a),this.setState({groups:r})}}},{key:"deleteCard",value:function(e){console.log(this);var t=this.state.groups;m.default.forEach(t,function(t,r){m.default.remove(t.cards,function(t){return t.pk_appregister===e})}),this.setState({groups:t})}},{key:"changeGroupItemName",value:function(e,t){var r=this.state.groups;m.default.forEach(r,function(r){if(r.pk_app_group===t)return r.groupname=e,!1}),this.setState({groups:r})}},{key:"editGroupItemName",value:function(e){this.setState({currEditID:e})}},{key:"addGroupItem",value:function(e){var t=this.state.groups,r=void 0;m.default.forEach(t,function(t,a){if(t.pk_app_group===e)return r=a,!1});var a={pk_app_group:"newGroupItem"+(new Date).getTime(),groupname:"分组("+(r+1)+")",type:"group"};t.splice(r+1,0,a),this.setState({groups:t})}},{key:"deleteGroupItem",value:function(e){var t=this.state.groups,r=void 0;m.default.forEach(t,function(t,a){if(t.pk_app_group===e)return r=a,!1}),t.splice(r,1),this.setState({groups:t})}},{key:"changeGroupName",value:function(e,t){var r=this.state.groups;m.default.forEach(r,function(r,a){if(r.pk_app_group===e)return r.groupname=t,!1}),this.setState({groups:r,currEditID:""}),console.log(this.state)}},{key:"cancelGroupName",value:function(){this.setState({currEditID:""})}},{key:"moveGroupItem",value:function(e,t){var r=this.state.groups,a=r[e];r.splice(e,1),r.splice(t,0,a),this.setState({groups:r})}},{key:"createGroupItem",value:function(e,t,r,a,i){return p.default.createElement(g.default,{key:e,id:e,groupname:t,type:r,index:a,cards:i,currEditID:this.state.currEditID,changeGroupItemName:this.changeGroupItemName.bind(this),onDrop:this.onDrop.bind(this),addGroupItem:this.addGroupItem.bind(this),deleteGroupItem:this.deleteGroupItem.bind(this),editGroupItemName:this.editGroupItemName.bind(this),moveGroupItem:this.moveGroupItem.bind(this),deleteCard:this.deleteCard.bind(this),changeGroupName:this.changeGroupName.bind(this),cancelGroupName:this.cancelGroupName.bind(this)})}},{key:"initGroupItem",value:function(e){var t=this,r=[];return m.default.forEach(e,function(e,a){r.push(t.createGroupItem(e.pk_app_group,e.groupname,e.type,a,e.cards))}),r}},{key:"render",value:function(){var e=this.state,t=e.groups;e.cards;return p.default.createElement("div",{className:"nc-workbench-home-page"},p.default.createElement("div",{className:"nc-workbench-home-container"},this.initGroupItem(t)))}}]),t}(l.Component);t.default=(0,d.DragDropContext)(f.default)((0,s.connect)(function(e){return{formData:e.formData,proData:e.proData}},{changeIntlData:c.changeIntlData,saveImg:c.saveImg,clearData:c.clearData})(v))},237:function(e,t,r){},238:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(r(27)),i=c(r(26)),n=c(r(25)),o=c(r(24)),u=c(r(23)),l=r(1),p=c(l),s=c(r(0));function c(e){return e&&e.__esModule?e:{default:e}}r(237);var d=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){var e=this.props.height,t=void 0===e?40:e;return p.default.createElement("div",{className:"page-scroll",style:{height:"calc(100vh - "+t+"px)"}},p.default.createElement("div",{className:"page-layout"},this.props.children))}}]),t}(l.Component);d.propTypes={children:s.default.any.isRequired},t.default=d},240:function(e,t,r){},241:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(r(27)),i=c(r(26)),n=c(r(25)),o=c(r(24)),u=c(r(23)),l=r(1),p=c(l),s=r(243);function c(e){return e&&e.__esModule?e:{default:e}}r(240);var d=[{anchor:"no1",text:"分组一"}],f=function(e){function t(e,r){(0,i.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e,r));return n.createTabsLink=function(){return d.map(function(e,t){var r=e.anchor,a=e.text;return p.default.createElement("li",null,p.default.createElement(s.Link,{activeClass:"active",to:r,offset:-40,spy:!0,smooth:!0,duration:500},a))})},n}return(0,u.default)(t,e),(0,n.default)(t,[{key:"render",value:function(){return p.default.createElement("ul",{className:"n-tabs"},this.createTabsLink())}}]),t}(l.Component);t.default=f},244:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearData=void 0;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(101));t.clearData=function(){return{type:a.CLEARDATA}}},316:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(r(245)),i=f(r(27)),n=f(r(26)),o=f(r(25)),u=f(r(24)),l=f(r(23));r(280);var p=r(1),s=f(p),c=(f(r(0)),r(257)),d=r(100);function f(e){return e&&e.__esModule?e:{default:e}}var g=175,m=175,h=10,v={hover:function(e,t,r){if(t.getItem().id!=e.id){var a=(0,d.findDOMNode)(r).getBoundingClientRect(),i=(a.bottom,a.top,t.getClientOffset()),n=(i.y,a.top,a.left-i.x);console.log(n)}}};var y=function(e){function t(){return(0,n.default)(this,t),(0,u.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentWillReceiveProps",value:function(e){!this.props.isOver&&e.isOver&&console.log("enter"),this.props.isOver&&!e.isOver&&console.log("leave")}},{key:"render",value:function(){var e=this,t=this.props,r=t.connectDragSource,i=t.connectDropTarget,n=t.isDragging,o=t.isOver,u=this.props,l=u.id,p=u.GridX,c=u.GridY,d=u.w,f=u.h;this.props.deleteCard;return r(i(s.default.createElement("div",{style:{width:d*g+(d-1)*h,height:f*m+(f-1)*h,background:o?"#000":"#fff",position:"absolute",border:"1px solid #f1f1f1","border-radius":"3px",transform:"translate("+(p*g+(p+1)*h)+"px, "+(c*m+(c+1)*h)+"px)",opacity:n?0:1}},s.default.createElement("div",{style:{"padding-left":"10px"}},l),s.default.createElement("div",null),s.default.createElement("div",{style:{position:"absolute",height:"35px",width:"100%",padding:"7px 8px",bottom:"0",background:"#f2f2f2"}},s.default.createElement(a.default,{type:"delete",style:{fontSize:19,float:"right","line-height":21,cursor:"pointer"},onClick:function(){e.props.deleteCard(l)}})))))}}]),t}(p.Component);t.default=(0,c.DropTarget)("item",v,function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})((0,c.DragSource)("item",{beginDrag:function(e,t,r){return{id:e.id,type:e.type}},endDrag:function(e,t,r){}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(y))},332:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=_(r(279)),i=_(r(331)),n=_(r(326)),o=_(r(245)),u=_(r(315)),l=_(r(27)),p=_(r(26)),s=_(r(25)),c=_(r(24)),d=_(r(23));r(282),r(322),r(320),r(280),r(319);var f=r(1),g=_(f),m=(_(r(0)),r(100)),h=r(257),v=_(r(316)),y=_(r(261));function _(e){return e&&e.__esModule?e:{default:e}}var k={hover:function(e,t,r){if(t.getItem().type===e.type){var a=t.getItem().index,i=e.index;if(a!==i){var n=(0,m.findDOMNode)(r).getBoundingClientRect(),o=(n.bottom-n.top)/2,u=t.getClientOffset().y-n.top;a<i&&u<o||a>i&&u>o||(e.moveGroupItem(a,i),t.getItem().index=i)}}},drop:function(e,t,r){var a=t.getItem(),i=e;e.onDrop(a,i)}};var G=function(e){function t(e){(0,p.default)(this,t);var r=(0,c.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return r.editGroupName=function(e){var t=e.target.value;console.log(t),r.state.groupName=t},r.state={forbidDrag:!1,groupName:""},r}return(0,d.default)(t,e),(0,s.default)(t,[{key:"createCards",value:function(e){var t=this,r=[];return y.default.forEach(e,function(e){r.push(g.default.createElement(v.default,{GridX:e.GridX,type:e.type,GridY:e.GridY,w:e.w,h:e.h,id:e.pk_appregister,key:e.pk_appregister,deleteCard:t.props.deleteCard,forbidDrag:t.state.forbidDrag}))}),r}},{key:"changeGroupItemName",value:function(e,t){}},{key:"render",value:function(){var e=this,t=this.props,r=t.isDragging,l=t.connectDragSource,p=t.connectDropTarget,s=t.groupname,c=t.id,d=(t.cards,t.isOver),f=t.currEditID,m=(this.props.changeGroupItemName,r?0:1),h=void 0;return h=f===c?g.default.createElement(i.default,{className:"group-item-title-container-edit"},g.default.createElement(n.default,{span:4},g.default.createElement("div",{className:"group-item-title-left"},g.default.createElement(u.default,{size:"small",placeholder:"Basic usage",defaultValue:s,onChange:this.editGroupName.bind(this)}),g.default.createElement(o.default,{type:"check-square-o",className:"group-item-icon",title:"占位符",onClick:function(){e.props.changeGroupName(c,e.state.groupName)}}),g.default.createElement(o.default,{type:"close-square-o",className:"group-item-icon",title:"占位符",onClick:function(){e.props.cancelGroupName()}})))):g.default.createElement(i.default,{className:"group-item-title-container-no-edit"},g.default.createElement(n.default,{span:2,className:"group-item-title-left"},g.default.createElement("div",null,g.default.createElement("span",null,s))),g.default.createElement(n.default,{span:3,className:"group-item-title-right",offset:19},g.default.createElement("div",{className:"group-item-title-edit"},g.default.createElement(o.default,{type:"edit",title:"占位符",className:"group-item-icon",onClick:function(){e.props.editGroupItemName(c)}})),g.default.createElement("div",{className:"group-item-title-edit"},g.default.createElement(o.default,{type:"close-square-o",title:"占位符",className:"group-item-icon",onClick:function(){e.props.deleteGroupItem(c)}})),g.default.createElement("div",{className:"group-item-title-edit"},g.default.createElement(o.default,{type:"plus-square-o",title:"占位符",className:"group-item-icon",onClick:function(){}})),g.default.createElement("div",{className:"group-item-title-edit"},g.default.createElement(o.default,{type:"ellipsis",title:"占位符",className:"group-item-icon",onClick:function(){}})))),l(p(g.default.createElement("div",{className:"group-item"},g.default.createElement("div",{className:"group-item-container",style:{background:d?"#000":"#ccc"}},h,g.default.createElement("section",{style:{height:380,opacity:m}},this.createCards(this.props.cards))),g.default.createElement("div",null,g.default.createElement(a.default,{className:"group-item-add",onClick:function(){e.props.addGroupItem(c)}}," + 添加分组")))))}}]),t}(f.Component);t.default=(0,h.DropTarget)("item",k,function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}})((0,h.DragSource)("item",{beginDrag:function(e,t,r){return{id:e.id,index:e.index,type:e.type}}},function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})(G))},357:function(e,t,r){}}]);