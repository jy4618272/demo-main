(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{616:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=x(a(623)),n=x(a(3)),l=x(a(85)),u=x(a(6)),i=x(a(15)),s=x(a(4)),d=x(a(7)),o=x(a(635));a(259),a(642);var p=a(1),c=x(p),f=(a(126),a(93)),m=x(a(0)),g=a(630),h=x(a(258)),D=x(a(825)),y=x(a(813)),v=x(a(797)),b=x(a(796)),E=x(a(755)),k=x(a(685)),w=x(a(263));function x(e){return e&&e.__esModule?e:{default:e}}a(753);var T=o.default.Header,_=(o.default.Footer,o.default.Sider),A=o.default.Content,N=[{name:"增加模块",type:"primary"},{name:"增加应用分类",type:"primary"},{name:"增加应用",type:"primary"},{name:"保存",type:"primary"},{name:"取消"},{name:"删除",type:"primary"},{name:"修改",type:"primary"}],O=function(e){function t(e){(0,u.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.handleClick=function(e){var t=void 0;switch(e){case"增加模块":a.actionType=1,a.nodeData=a.props.nodeData,a.props.parentData||a.props.setParentData(a.nodeData.moduleid),a.optype=a.props.optype;var r={systypecode:"",moduleid:"",systypename:"",orgtypecode:void 0,appscope:void 0,isaccount:!1,supportcloseaccbook:!1,resid:"",dr:0};a.props.setNodeData(r),a.props.setOpType("module"),a.props.setBillStatus({isEdit:!0,isNew:!0});break;case"增加应用分类":a.actionType=2,a.nodeData=a.props.nodeData,a.props.parentData===a.nodeData.parentcode&&a.props.setParentData(a.nodeData.moduleid),a.optype=a.props.optype;a.props.setNodeData({apptype:0,isenable:!0,code:"",name:"",app_desc:"",help_name:""}),a.props.setOpType("classify"),a.props.setBillStatus({isEdit:!0,isNew:!0});break;case"增加应用":a.actionType=3,a.nodeData=a.props.nodeData,a.props.setParentData(a.nodeData.pk_appregister),a.optype=a.props.optype;var l={code:"",name:"",orgtypecode:void 0,funtype:void 0,app_desc:"",help_name:"",isenable:!0,iscauserusable:!1,uselicense_load:!0,pk_group:"",width:"1",height:"1",target_path:"",apptype:1,image_src:""};a.props.setAppParamData([]),a.props.setNodeData(l),a.props.setOpType("app"),a.props.setBillStatus({isEdit:!0,isNew:!0});break;case"增加页面":a.actionType=4,a.optype=a.props.optype,a.nodeData=a.props.nodeData,a.props.setParentData(a.nodeData.pk_appregister);a.props.setPageButtonData([]),a.props.setPageTemplateData([]),a.props.setPrintTemplateData([]),a.props.setNodeData({pagecode:"",pagename:"",pagedesc:"",pageurl:"",resid:""}),a.props.setOpType("page"),a.props.setBillStatus({isEdit:!0,isNew:!0});break;case"保存":var u=a.props.getFromData();if(!u)return;var i=a.props.billStatus.isNew,s=void 0;switch(a.actionType){case 1:t=i?"/nccloud/platform/appregister/insertmodule.do":"/nccloud/platform/appregister/editmodule.do",a.props.parentData&&(u.parentcode=a.props.parentData),s=u;break;case 2:t=i?"/nccloud/platform/appregister/insertapp.do":"/nccloud/platform/appregister/editapp.do","module"===a.optype?u.parent_id=a.nodeData.moduleid:u.parent_id=a.props.parentData,s=(0,n.default)({},a.props.nodeData,u);break;case 3:t=i?"/nccloud/platform/appregister/insertapp.do":"/nccloud/platform/appregister/editapp.do",u.parent_id=a.props.parentData,s=(0,n.default)({},a.props.nodeData,u);break;case 4:t=i?"/nccloud/platform/appregister/insertpage.do":"/nccloud/platform/appregister/editpage.do",u.parent_id=a.props.parentData,s=(0,n.default)({},a.props.nodeData,u)}(0,h.default)({url:t,data:s,alert:!0,success:function(e){var t=e.data;if(t.success&&t.data){if((0,w.default)({status:"success"}),i){if("classify"===a.props.optype||"app"===a.props.optype){var r={moduleid:t.data.pk_appregister,parentcode:a.props.parentData,systypecode:t.data.code,systypename:t.data.name};a.props.addTreeData(r)}else if("page"===a.props.optype){var n={moduleid:t.data.pk_apppage,parentcode:a.props.parentData,systypecode:t.data.pagecode,systypename:t.data.pagename};a.props.addTreeData(n)}else a.props.addTreeData(s);a.props.setNodeData(t.data)}else{if("classify"===a.props.optype||"app"===a.props.optype){var l={moduleid:s.pk_appregister,parentcode:a.props.parentData,systypecode:s.code,systypename:s.name};a.props.updateTreeData(l)}else if("page"===a.props.optype){var u={moduleid:t.data.pk_apppage,parentcode:a.props.parentData,systypecode:t.data.pagecode,systypename:t.data.pagename};a.props.updateTreeData(u)}else a.props.updateTreeData(s);a.props.setNodeData(s)}a.props.setBillStatus({isEdit:!1,isNew:!1})}else(0,w.default)({status:"error",msg:res.error.message})}});break;case"取消":a.props.setOpType(a.optype),a.props.setNodeData(a.nodeData),a.props.setBillStatus({isEdit:!1,isNew:!1});break;case"删除":var d=void 0,o=void 0,p=a.props.nodeData,c=p.pk_appregister,f=p.code,m=p.name;switch(a.props.optype){case"module":t="/nccloud/platform/appregister/deletemodule.do",d={moduleid:a.props.nodeData.moduleid},o=a.props.nodeData;break;case"classify":case"app":t="/nccloud/platform/appregister/deleteapp.do",d={pk_appregister:c},o={moduleid:c,parentcode:a.props.parentData,systypecode:f,systypename:m}}(0,h.default)({url:t,data:d,success:function(e){var t=e.data;t.success&&t.data?((0,w.default)({status:"success",msg:t.data.true}),a.props.delTreeData(o),a.props.setOpType(null)):(0,w.default)({status:"error",msg:t.data.true})}}),console.log("删除 "+o);break;case"修改":switch(a.nodeData=a.props.nodeData,a.optype=a.props.optype,a.optype){case"module":a.actionType=1;break;case"classify":a.actionType=2;break;case"app":a.actionType=3}a.props.setBillStatus({isEdit:!0,isNew:!1})}},a.creatBtn=function(e){var t=e.name,n=e.isShow,l=e.type;if(n)return c.default.createElement(r.default,{className:"margin-left-10",type:l,onClick:a.handleClick.bind(a,t)},t)},a.switchFrom=function(){switch(a.props.optype){case"module":return c.default.createElement(y.default,null);case"classify":return c.default.createElement(v.default,null);case"app":return c.default.createElement(b.default,null);case"page":return c.default.createElement(E.default,null);default:return""}},a.setBtnsShow=function(e){var t=e.name,r=a.props,l=r.optype,u=r.parentData,i=r.billStatus,s=i.isEdit,d=i.isNew,o=!1;switch(t){case"增加模块":o=!s&&(""===l||"module"===l&&!u);break;case"增加应用分类":o=!s&&!("module"!==l||!u||2!==u.length);break;case"增加应用":o=!s&&"classify"===l;break;case"增加页面":o=!s&&"app"===l;break;case"保存":case"取消":o=!!s;break;case"删除":o=!d&&""!==l;break;case"修改":o=!d&&!s&&""!==l}return(0,n.default)({},e,{isShow:o})},a.state={siderHeight:"280"},a.nodeData,a.optype,a.actionType,a}return(0,d.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){var e=this;window.onresize=function(){var t=document.querySelector(".ant-layout-content").offsetHeight;e.setState({siderHeight:t})}}},{key:"render",value:function(){var e=this;return c.default.createElement(k.default,{className:"nc-workbench-appRegister"},c.default.createElement(o.default,null,c.default.createElement(T,null,N.map(function(t,a){return t=e.setBtnsShow(t),e.creatBtn(t)})),c.default.createElement(o.default,{height:"100%"},c.default.createElement(_,{width:280,height:"100%",style:{background:"#fff",width:"500px","min-height":"calc(100vh - 64px - 48px)",height:this.state.siderHeight+"px",overflowY:"auto",padding:"20px"}},c.default.createElement(D.default,null)),c.default.createElement(A,{style:{padding:"20px",minHeight:280}},this.switchFrom()))))}}]),t}(p.Component);O.PropTypes={setTreeData:m.default.func.isRequired,optype:m.default.string.isRequired,billStatus:m.default.object.isRequired,setBillStatus:m.default.object.isRequired,parentData:m.default.string.isRequired,setOpType:m.default.func.isRequired,nodeData:m.default.object.isRequired,setAppParamData:m.default.func.isRequired,setPageButtonData:m.default.func.isRequired,setPageTemplateData:m.default.func.isRequired,setPrintTemplateData:m.default.func.isRequired,getFromData:m.default.func.isRequired,addTreeData:m.default.func.isRequired,delTreeData:m.default.func.isRequired,updateTreeData:m.default.func.isRequired,setParentData:m.default.func.isRequired},t.default=(0,f.connect)(function(e){return{optype:e.AppRegisterData.optype,billStatus:e.AppRegisterData.billStatus,parentData:e.AppRegisterData.parentData,nodeData:e.AppRegisterData.nodeData,getFromData:e.AppRegisterData.getFromData,addTreeData:e.AppRegisterData.addTreeData,delTreeData:e.AppRegisterData.delTreeData,updateTreeData:e.AppRegisterData.updateTreeData}},{setNodeData:g.setNodeData,setBillStatus:g.setBillStatus,setOpType:g.setOpType,setAppParamData:g.setAppParamData,setPageButtonData:g.setPageButtonData,setPageTemplateData:g.setPageTemplateData,setPrintTemplateData:g.setPrintTemplateData,setParentData:g.setParentData})(O)},630:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFromDataFunc=t.setPrintTemplateData=t.setPageTemplateData=t.setPageButtonData=t.setAppParamData=t.setAppType=t.setParentData=t.setBillStatus=t.setOpType=t.delTreeData=t.addTreeData=t.updateTreeData=t.setNodeData=t.clearData=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(265));t.clearData=function(){return{type:r.CLEARDATA}},t.setNodeData=function(e){return{type:r.SETNODEDATA,data:e}},t.updateTreeData=function(e){return{type:r.UPDATENODEDATA,updateTreeData:e}},t.addTreeData=function(e){return{type:r.ADDNODEDATA,addTreeData:e}},t.delTreeData=function(e){return{type:r.DELNODEDATA,delTreeData:e}},t.setOpType=function(e){return{type:r.OPERATIONTYPE,optype:e}},t.setBillStatus=function(e){return{type:r.BILLSTATUS,billStatus:e}},t.setParentData=function(e){return{type:r.PARENTDATA,parentData:e}},t.setAppType=function(e){return{type:r.APPTYPE,appType:e}},t.setAppParamData=function(e){return{type:r.APPPARAMDATA,data:e}},t.setPageButtonData=function(e){return{type:r.PAGEBUTTONDATA,data:e}},t.setPageTemplateData=function(e){return{type:r.PAGETEMPLATEDATA,data:e}},t.setPrintTemplateData=function(e){return{type:r.PRINTTEMPLATEDATA,data:e}},t.getFromDataFunc=function(e){return{type:r.GETFROMDATA,getFromData:e}}},683:function(e,t,a){(e.exports=a(45)(!1)).push([e.i,"#ncc .nc-workbench-layout .nc-workbench-page{margin-top:48px;height:calc(100vh - 53px);padding:10px 0 0}#ncc .nc-workbench-layout .nc-workbench-page .nc-workbench-ownpage{min-width:900px}@media screen and (min-width:1280px){#ncc .nc-workbench-layout .nc-workbench-page{padding:10px 90px 0}}@media screen and (min-width:1440px){#ncc .nc-workbench-layout .nc-workbench-page{padding:10px 120px 0}}@media screen and (min-width:1600px){#ncc .nc-workbench-layout .nc-workbench-page{padding:10px 125px 0}}",""])},684:function(e,t,a){var r=a(683);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(49)(r,n);r.locals&&(e.exports=r.locals)},685:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(a(85)),n=p(a(6)),l=p(a(15)),u=p(a(4)),i=p(a(7)),s=a(1),d=p(s),o=p(a(0));function p(e){return e&&e.__esModule?e:{default:e}}a(684);var c=function(e){function t(){return(0,n.default)(this,t),(0,u.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return d.default.createElement("div",{className:"nc-workbench-page"},d.default.createElement("div",{className:"nc-workbench-ownpage "+this.props.className},this.props.children))}}]),t}(s.Component);c.propTypes={children:o.default.any.isRequired},t.default=c},752:function(e,t,a){(e.exports=a(45)(!1)).push([e.i,"body{background-color:#f0f2f5}.nc-workbench-appRegister .ant-layout{background:#fff}.nc-workbench-appRegister>.ant-layout{border:1px solid #edecec;border-radius:4px}.nc-workbench-appRegister .ant-layout-header{height:60px;line-height:60px;padding:0 20px;background:#fff;border-bottom:1px solid #edecec;display:flex;justify-content:flex-end;align-items:center}.nc-workbench-appRegister .ant-layout-sider{border-right:1px solid #edecec}.nc-workbench-appRegister .from-card{padding:24px;background:#fbfbfb;border-radius:6px}.nc-workbench-appRegister .from-card .ant-form-item{display:flex}.nc-workbench-appRegister .from-card .ant-form-item-control-wrapper{flex:1}.nc-workbench-appRegister .ant-form-item{margin-bottom:16px}.nc-workbench-appRegister .ant-form-item-with-help{margin-bottom:0}.nc-workbench-appRegister .ant-form-explain{font-size:12px}.nc-workbench-appRegister .ant-checkbox-disabled+span{color:rgba(0,0,0,.65)}.nc-workbench-appRegister .ant-form-item-label{min-width:96px}.nc-workbench-appRegister .ant-checkbox-wrapper{margin-left:70px}",""])},753:function(e,t,a){var r=a(752);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(49)(r,n);r.locals&&(e.exports=r.locals)},754:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_(a(698)),n=_(a(701)),l=_(a(623)),u=_(a(85)),i=_(a(6)),s=_(a(15)),d=_(a(4)),o=_(a(7)),p=_(a(3)),c=_(a(73)),f=_(a(626)),m=_(a(697));a(694),a(691),a(259),a(260),a(700);var g=a(1),h=_(g),D=a(93),y=_(a(0)),v=a(629),b=_(a(662)),E=_(a(699)),k=_(a(622)),w=a(630),x=_(a(258)),T=_(a(263));function _(e){return e&&e.__esModule?e:{default:e}}var A=m.default.TabPane,N=function(e){var t=e.editable,a=e.value,r=e.onChange;return h.default.createElement("div",null,t?h.default.createElement(f.default,{style:{margin:"-5px 0"},value:a,onChange:function(e){return r(e.target.value)}}):a)};var O=function(e){var t=e.isOver,a=e.connectDragSource,r=e.connectDropTarget,n=(e.moveRow,e.dragRow),l=e.clientOffset,u=e.sourceClientOffset,i=e.initialClientOffset,s=(0,c.default)(e,["isOver","connectDragSource","connectDropTarget","moveRow","dragRow","clientOffset","sourceClientOffset","initialClientOffset"]),d=(0,p.default)({},s.style,{cursor:"move"}),o=s.className;if(t&&i){var f=function(e,t,a,r,n){var l=(a.y-n.y)/2,u=r.y-n.y;return e<t&&u>l?"downward":e>t&&u<l?"upward":void 0}(n.index,s.index,i,l,u);"downward"===f&&(o+=" drop-over-downward"),"upward"===f&&(o+=" drop-over-upward")}return a(r(h.default.createElement("tr",(0,p.default)({},s,{className:o,style:d}))))};O=(0,v.DropTarget)("row",{drop:function(e,t){var a=t.getItem().index,r=e.index;a!==r&&(e.moveRow(a,r),t.getItem().index=r)}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),sourceClientOffset:t.getSourceClientOffset()}})((0,v.DragSource)("row",{beginDrag:function(e){return{index:e.index}}},function(e,t){return{connectDragSource:e.dragSource(),dragRow:t.getItem(),clientOffset:t.getClientOffset(),initialClientOffset:t.getInitialClientOffset()}})(O));var q=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.components={body:{row:O}},a.moveRow=function(e,t){var r=a.props.appData.appButtonVOs[e],n=(0,E.default)(a.props.appData,{appButtonVOs:{$splice:[[e,1],[t,0,r]]}});n.appButtonVOs.map(function(e,t){return e.btnorder=t}),(0,x.default)({url:"/nccloud/platform/appregister/orderbuttons.do",data:n.appButtonVOs,success:function(e){var t=e.data;t.success&&t.data&&a.props.setAppData(n)}})},a.creatAddLineBtn=function(){return h.default.createElement("div",null,h.default.createElement(l.default,{onClick:function(){return a.add()},style:{"margin-left":"8px"}},"新增行"))},a.state={activeKey:"1"},a.columnsBtn=[{title:"序号",dataIndex:"num",width:"5%"},{title:"按钮编码",dataIndex:"btncode",width:"15%",render:function(e,t){return a.renderColumns(e,t,"btncode")}},{title:"按钮名称",dataIndex:"btnname",width:"15%",render:function(e,t){return a.renderColumns(e,t,"btnname")}},{title:"pagecode",dataIndex:"pagecode",width:"10%",render:function(e,t){return a.renderColumns(e,t,"pagecode")}},{title:"按钮功能描述",dataIndex:"btndesc",width:"40%",render:function(e,t){return a.renderColumns(e,t,"btndesc")}},{title:"操作",dataIndex:"operation",render:function(e,t){var r=t.editable;return h.default.createElement("div",{className:"editable-row-operations"},r?h.default.createElement("span",null,h.default.createElement("a",{className:"margin-right-5",onClick:function(){return a.save(t)}},"保存"),h.default.createElement(n.default,{title:"确定取消?",onConfirm:function(){return a.cancel(t)}},h.default.createElement("a",{className:"margin-right-5"},"取消"))):h.default.createElement("span",null,h.default.createElement("a",{className:"margin-right-5",onClick:function(){return a.edit(t)}},"编辑"),h.default.createElement(n.default,{title:"确定删除?",onConfirm:function(){return a.del(t)}},h.default.createElement("a",{className:"margin-right-5"},"删除"))))}}],a.columnsSt=[{title:"序号",dataIndex:"num",width:"5%"},{title:"模板编码",dataIndex:"templateid",width:"25%",render:function(e,t){return a.renderColumns(e,t,"templateid")}},{title:"模板名称",dataIndex:"templatename",width:"15%",render:function(e,t){return a.renderColumns(e,t,"templatename")}},{title:"所属模块",width:"10%",dataIndex:"moduleid",render:function(e,t){return a.renderColumns(e,t,"moduleid")}},{title:"操作",dataIndex:"operation",render:function(e,t){var r=t.editable;return h.default.createElement("div",{className:"editable-row-operations"},r?h.default.createElement("span",null,h.default.createElement("a",{className:"margin-right-5",onClick:function(){return a.save(t)}},"保存"),h.default.createElement(n.default,{title:"确定取消?",onConfirm:function(){return a.cancel(t)}},h.default.createElement("a",{className:"margin-right-5"},"取消"))):h.default.createElement("span",null,h.default.createElement("a",{className:"margin-right-5",onClick:function(){return a.edit(t)}},"编辑"),h.default.createElement(n.default,{title:"确定删除?",onConfirm:function(){return a.del(t)}},h.default.createElement("a",{className:"margin-right-5"},"删除"))))}}],a.columnsPt=[{title:"序号",dataIndex:"num",width:"5%"},{title:"模板编码",dataIndex:"templateid",width:"25%",render:function(e,t){return a.renderColumns(e,t,"templateid")}},{title:"模板名称",dataIndex:"templatename",width:"15%",render:function(e,t){return a.renderColumns(e,t,"templatename")}},{title:"所属模块",width:"10%",dataIndex:"moduleid",render:function(e,t){return a.renderColumns(e,t,"moduleid")}},{title:"操作",dataIndex:"operation",render:function(e,t){var r=t.editable;return h.default.createElement("div",{className:"editable-row-operations"},r?h.default.createElement("span",null,h.default.createElement("a",{className:"margin-right-5",onClick:function(){return a.save(t)}},"保存"),h.default.createElement(n.default,{title:"确定取消?",onConfirm:function(){return a.cancel(t)}},h.default.createElement("a",{className:"margin-right-5"},"取消"))):h.default.createElement("span",null,h.default.createElement("a",{className:"margin-right-5",onClick:function(){return a.edit(t)}},"编辑"),h.default.createElement(n.default,{title:"确定删除?",onConfirm:function(){return a.del(t)}},h.default.createElement("a",{className:"margin-right-5"},"删除"))))}}],a.cacheData,a}return(0,o.default)(t,e),(0,s.default)(t,[{key:"renderColumns",value:function(e,t,a){var r=this;return t=k.default.cloneDeep(t),h.default.createElement(N,{editable:t.editable,value:e,onChange:function(e){return r.handleChange(e,t,a)}})}},{key:"handleChange",value:function(e,t,a){var r=this.getNewData(),n=r.filter(function(e){return t.num===e.num})[0];n&&(n[a]=e,this.setNewData(r))}},{key:"edit",value:function(e){console.log(e);var t=this.getNewData();this.cacheData=k.default.cloneDeep(t);var a=t.filter(function(t){return e.num===t.num})[0];a&&(a.editable=!0,this.setNewData(t))}},{key:"del",value:function(e){var t=this;if(e.pk_btn||e.pk_param){var a=void 0,r=void 0,n=this.state.activeKey,l=this.getNewData();"1"===n?(a="/nccloud/platform/appregister/deletebutton.do",r={pk_btn:e.pk_btn}):(a="/nccloud/platform/appregister/deleteparam.do",r={pk_param:e.pk_param}),(0,x.default)({url:a,data:r,success:function(a){var r=a.data;r.success&&r.data&&(e.pk_btn?k.default.remove(l,function(t){return e.pk_btn===t.pk_btn}):k.default.remove(l,function(t){return e.pk_param===t.pk_param}),t.setNewData(l),t.cacheData=k.default.cloneDeep(l))}})}}},{key:"save",value:function(e){var t=this,a=this.state.activeKey,r=this.getNewData(),n=void 0,l=void 0,u=r.filter(function(t){return e.num===t.num})[0];u&&(u.pk_btn||u.pk_systemplate?"1"===a?n="/nccloud/platform/appregister/editbutton.do":"2"===a&&(n="/nccloud/platform/appregister/editsystemplate.do"):"1"===a?n="/nccloud/platform/appregister/insertbutton.do":"2"===a&&(n="/nccloud/platform/appregister/insertsystemplate.do"),l=(0,p.default)({},u),(0,x.default)({url:n,data:l,success:function(e){var a=e.data;a.success&&a.data&&(delete u.editable,l.pk_btn||l.pk_systemplate?(r.map(function(e,t){return l.pk_btn===e.pk_btn||l.pk_systemplate===e.pk_systemplate?(0,p.default)({},e,l):e}),t.setNewData(r)):(r[r.length-1]=a.data,t.setNewData(r)),t.cacheData=k.default.cloneDeep(r))}}))}},{key:"cancel",value:function(e){var t=this.getNewData().filter(function(t){return e.num===t.num})[0];t&&(delete t.editable,this.setNewData(this.cacheData))}},{key:"add",value:function(){if(this.props.billStatus.isNew)(0,T.default)({status:"warning",msg:"请先将页面进行保存！"});else{var e=this.state.activeKey,t=this.props.nodeData.pk_appregister,a=this.getNewData();this.cacheData=k.default.cloneDeep(a),"1"===e?a.push({editable:!0,btncode:"",btnname:"",btndesc:"",parent_id:t,isenable:!0,pagecode:""}):"2"===e?a.push({editable:!0,tempstyle:0,templatename:"",parent_id:t,isenable:!0,pagecode:""}):"3"===e&&a.push({editable:!0,tempstyle:1,templatename:"",parent_id:t,isenable:!0,pagecode:""}),this.setNewData(a)}}},{key:"getNewData",value:function(){var e=this.state.activeKey,t=this.props,a=t.appButtonVOs,r=t.pageSystemplateVO,n=t.printSystemplateVO;return"1"===e?k.default.cloneDeep(a):"2"===e?k.default.cloneDeep(r):"3"===e?k.default.cloneDeep(n):void 0}},{key:"setNewData",value:function(e){var t=this.state.activeKey;"1"===t?this.props.setPageButtonData(e):"2"===t?this.props.setPageTemplateData(e):"3"===t&&this.props.setPrintTemplateData(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.appButtonVOs,n=t.pageSystemplateVO,l=t.printSystemplateVO;return h.default.createElement(m.default,{onChange:function(t){e.setState({activeKey:t})},type:"card",tabBarExtraContent:this.creatAddLineBtn()},h.default.createElement(A,{tab:"按钮注册",key:"1"},h.default.createElement(r.default,{bordered:!0,pagination:!1,rowKey:"num",components:this.components,dataSource:a.map(function(e,t){return e.num=t+1,e}),onRow:function(t,a){return{index:a,moveRow:e.moveRow}},columns:this.columnsBtn,size:"middle"})),h.default.createElement(A,{tab:"页面模板注册",key:"2"},h.default.createElement(r.default,{bordered:!0,pagination:!1,rowKey:"num",dataSource:n.map(function(e,t){return e.num=t+1,e}),columns:this.columnsSt,size:"middle"})),h.default.createElement(A,{tab:"打印模板注册",key:"3"},h.default.createElement(r.default,{bordered:!0,pagination:!1,rowKey:"num",dataSource:l.map(function(e,t){return e.num=t+1,e}),columns:this.columnsSt,size:"middle"})))}}]),t}(g.Component);q.PropTypes={appType:y.default.number.isRequired,billStatus:y.default.object.isRequired,appButtonVOs:y.default.array.isRequired,pageSystemplateVO:y.default.array.isRequired,printSystemplateVO:y.default.array.isRequired,setPageTemplateData:y.default.func.isRequired,setPrintTemplateData:y.default.func.isRequired,setPageButtonData:y.default.func.isRequired,nodeData:y.default.object.isRequired};var P=(0,v.DragDropContext)(b.default)(q);t.default=(0,D.connect)(function(e){return{appType:e.AppRegisterData.appType,billStatus:e.AppRegisterData.billStatus,printSystemplateVO:e.AppRegisterData.printSystemplateVO,pageSystemplateVO:e.AppRegisterData.pageSystemplateVO,appButtonVOs:e.AppRegisterData.appButtonVOs,nodeData:e.AppRegisterData.nodeData}},{setPageButtonData:w.setPageButtonData,setPageTemplateData:w.setPageTemplateData,setPrintTemplateData:w.setPrintTemplateData})(P)},755:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=b(a(654)),n=b(a(653)),l=b(a(626)),u=b(a(625)),i=b(a(261)),s=b(a(85)),d=b(a(6)),o=b(a(15)),p=b(a(4)),c=b(a(7)),f=b(a(650));a(652),a(651),a(260),a(627),a(262),a(649);var m=a(1),g=b(m),h=a(93),D=b(a(0)),y=a(630),v=(b(a(258)),b(a(754)));function b(e){return e&&e.__esModule?e:{default:e}}var E=f.default.Item,k=function(e){function t(e){(0,d.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.createDom=function(e,t){var r=a.props.form.getFieldDecorator,n=a.props.billStatus.isEdit,s=e.lable,d=e.type,o=e.code,p=e.required,c=e.check;switch(d){case"select":return n?g.default.createElement(E,{label:s,hasFeedback:!0},r(o,{initialValue:t[o],rules:[{required:p,message:"请选择"+s}]})(g.default.createElement(i.default,{placeholder:"请选择"+s},a.createOption(e.options)))):g.default.createElement(E,{label:s},g.default.createElement("span",{className:"ant-form-text"},a.optionShow(e.options,t[o])));case"search":return n?g.default.createElement(E,{label:s,hasFeedback:!0},r(o,{initialValue:t[o],rules:[{required:p,message:e.placeholder?e.placeholder:"请选择"+s}]})(g.default.createElement(i.default,{placeholder:e.placeholder?e.placeholder:"请选择"+s,mode:"combobox",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onChange:a.handleSearch},a.createOption(e.options)))):g.default.createElement(E,{label:s},g.default.createElement("span",{className:"ant-form-text"},t[o]));case"checkbox":return g.default.createElement(E,null,r(o,{valuePropName:"checked",initialValue:t[o]})(g.default.createElement(u.default,{disabled:!n},s)));case"chooseImage":return n?g.default.createElement(E,{label:s},r(o,{initialValue:t[o],rules:[{required:p,message:e.placeholder?e.placeholder:"请选择"+s}]})(g.default.createElement(ChooseImageForForm,{data:imgs,title:"图标选择"}))):g.default.createElement(E,{label:s},g.default.createElement("span",{className:"ant-form-text"},t[o]));default:return n?g.default.createElement(E,{label:s},r(o,{initialValue:t[o],rules:[{required:p,message:"请输入"+s},{validator:c||null}]})(g.default.createElement(l.default,{placeholder:"请输入"+s}))):g.default.createElement(E,{label:s},g.default.createElement("span",{className:"ant-form-text"},t[o]))}},a.getFromData=function(){var e=a.props.form,t=e.getFieldsValue,r=!1;return(0,e.validateFields)(function(e,t){e||(r=!0)}),r?t():null},a.state={DOMDATA:[{lable:"页面编码",type:"input",code:"pagecode",required:!0,check:function(e,t,r){t===a.props.parentData?r("不能与父节点编码重复"):r()}},{lable:"页面名称",type:"input",code:"pagename",required:!0},{lable:"多语资源",type:"input",code:"resid",required:!1},{lable:"页面地址",type:"input",code:"pageurl",required:!0},{lable:"页面描述",type:"imput",code:"pagedesc",required:!1}]},a}return(0,c.default)(t,e),(0,o.default)(t,[{key:"getFields",value:function(e){var t=this,a=this.state.DOMDATA;if(!e.systypename){var r=[];return a.map(function(a,l){a.lable;var u=a.md,i=void 0===u?24:u,s=a.lg,d=void 0===s?12:s,o=a.xl,p=void 0===o?8:o;r.push(g.default.createElement(n.default,{md:i,lg:d,xl:p,key:l},t.createDom(a,e)))}),r}}},{key:"componentWillMount",value:function(){this.props.getFromDataFunc(this.getFromData)}},{key:"render",value:function(){return g.default.createElement("div",null,g.default.createElement(f.default,{className:"from-card"},g.default.createElement(r.default,{gutter:24},this.getFields(this.props.nodeData))),g.default.createElement("div",{style:{"margin-top":"16px",background:"#ffffff",padding:"10px","border-radius":"6px"}},g.default.createElement(v.default,null)))}}]),t}(m.Component);(k=f.default.create()(k)).PropTypes={updateTreeData:D.default.func.isRequired,nodeData:D.default.object.isRequired,billStatus:D.default.object.isRequired,getFromDataFunc:D.default.func.isRequired,parentData:D.default.string.isRequired},t.default=(0,h.connect)(function(e){var t=e.AppRegisterData;return{nodeData:t.nodeData,updateTreeData:t.updateTreeData,billStatus:t.billStatus,parentData:t.parentData}},{getFromDataFunc:y.getFromDataFunc})(k)},792:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=x(a(698)),n=x(a(3)),l=x(a(701)),u=x(a(623)),i=x(a(85)),s=x(a(6)),d=x(a(15)),o=x(a(4)),p=x(a(7)),c=x(a(626)),f=x(a(697));a(694),a(691),a(259),a(260),a(700);var m=a(1),g=x(m),h=a(93),D=x(a(0)),y=a(629),v=x(a(662)),b=(x(a(699)),x(a(622))),E=a(630),k=x(a(258)),w=x(a(263));function x(e){return e&&e.__esModule?e:{default:e}}var T=f.default.TabPane,_=function(e){var t=e.editable,a=e.value,r=e.onChange;return g.default.createElement("div",null,t?g.default.createElement(c.default,{style:{margin:"-5px 0"},value:a,onChange:function(e){return r(e.target.value)}}):a)},A=function(e){function t(e){(0,s.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.creatAddLineBtn=function(){return g.default.createElement("div",null,g.default.createElement(u.default,{onClick:function(){return a.add()},style:{"margin-left":"8px"}},"新增行"))},a.state={activeKey:"1"},a.columnsPar=[{title:"序号",dataIndex:"num",width:"5%"},{title:"参数名称",dataIndex:"paramname",width:"25%",render:function(e,t){return a.renderColumns(e,t,"paramname")}},{title:"参数值",width:"55%",dataIndex:"paramvalue",render:function(e,t){return a.renderColumns(e,t,"paramvalue")}},{title:"操作",dataIndex:"operation",render:function(e,t){var r=t.editable;return g.default.createElement("div",{className:"editable-row-operations"},r?g.default.createElement("span",null,g.default.createElement("a",{className:"margin-right-5",onClick:function(){return a.save(t)}},"保存"),g.default.createElement(l.default,{title:"确定取消?",onConfirm:function(){return a.cancel(t)}},g.default.createElement("a",{className:"margin-right-5"},"取消"))):g.default.createElement("span",null,g.default.createElement("a",{className:"margin-right-5",onClick:function(){return a.edit(t)}},"编辑"),g.default.createElement(l.default,{title:"确定删除?",onConfirm:function(){return a.del(t)}},g.default.createElement("a",{className:"margin-right-5"},"删除"))))}}],a.cacheData,a}return(0,p.default)(t,e),(0,d.default)(t,[{key:"renderColumns",value:function(e,t,a){var r=this;return t=b.default.cloneDeep(t),g.default.createElement(_,{editable:t.editable,value:e,onChange:function(e){return r.handleChange(e,t,a)}})}},{key:"handleChange",value:function(e,t,a){var r=this.getNewData(),n=r.filter(function(e){return t.num===e.num})[0];n&&(n[a]=e,this.setNewData(r))}},{key:"edit",value:function(e){var t=this.getNewData();this.cacheData=b.default.cloneDeep(t);var a=t.filter(function(t){return e.num===t.num})[0];a&&(a.editable=!0,this.setNewData(t))}},{key:"del",value:function(e){var t=this;if(e.pk_param){var a,r,n=this.getNewData();a="/nccloud/platform/appregister/deleteparam.do",r={pk_param:e.pk_param},(0,k.default)({url:a,data:r,success:function(a){var r=a.data;r.success&&r.data&&(b.default.remove(n,function(t){return e.pk_param===t.pk_param}),t.setNewData(n),t.cacheData=b.default.cloneDeep(n))}})}}},{key:"save",value:function(e){var t=this,a=(this.state.activeKey,this.getNewData()),r=void 0,l=void 0,u=a.filter(function(t){return e.num===t.num})[0];u&&(r=u.pk_param?"/nccloud/platform/appregister/editparam.do":"/nccloud/platform/appregister/insertparam.do",l=(0,n.default)({},u),(0,k.default)({url:r,data:l,success:function(e){var r=e.data;r.success&&r.data&&(delete u.editable,l.pk_param?(a.map(function(e,t){return l.pk_param===e.pk_param?(0,n.default)({},e,l):e}),t.setNewData(a)):(a[a.length-1]=r.data,t.setNewData(a)),t.cacheData=b.default.cloneDeep(a))}}))}},{key:"cancel",value:function(e){var t=this.getNewData().filter(function(t){return e.num===t.num})[0];t&&(delete t.editable,this.setNewData(this.cacheData))}},{key:"add",value:function(){if(this.props.billStatus.isNew)(0,w.default)({status:"warning",msg:"请先将应用进行保存！"});else{var e=this.props.nodeData.pk_appregister,t=this.getNewData();this.cacheData=b.default.cloneDeep(t),t.push({editable:!0,paramname:"",paramvalue:"",parentid:e}),this.setNewData(t)}}},{key:"getNewData",value:function(){this.state.activeKey;var e=this.props.appParamVOs;return b.default.cloneDeep(e)}},{key:"setNewData",value:function(e){this.state.activeKey,this.props.appParamVOs;this.props.setAppParamData(e)}},{key:"render",value:function(){var e=this,t=this.props.appParamVOs;return g.default.createElement(f.default,{onChange:function(t){e.setState({activeKey:t})},type:"card",tabBarExtraContent:this.creatAddLineBtn()},g.default.createElement(T,{tab:"参数注册",key:"1"},g.default.createElement(r.default,{bordered:!0,pagination:!1,rowKey:"num",dataSource:t.map(function(e,t){return e.num=t+1,e}),columns:this.columnsPar,size:"middle"})))}}]),t}(m.Component);A.PropTypes={appType:D.default.number.isRequired,billStatus:D.default.object.isRequired,appParamVOs:D.default.array.isRequired,setAppParamData:D.default.func.isRequired,nodeData:D.default.object.isRequired};var N=(0,y.DragDropContext)(v.default)(A);t.default=(0,h.connect)(function(e){return{appType:e.AppRegisterData.appType,billStatus:e.AppRegisterData.billStatus,appParamVOs:e.AppRegisterData.appParamVOs,nodeData:e.AppRegisterData.nodeData}},{setAppParamData:E.setAppParamData})(N)},793:function(e,t,a){(e.exports=a(45)(!1)).push([e.i,'.choose-imgae .choose-btn{border:1px solid #d9d9d9;width:100px;height:100px;display:flex;justify-content:center;align-items:center;color:#d9d9d9}.choose-imgae .choose-btn .font-size-80{font-size:80px}.choose-imgae-list{display:flex;justify-content:flex-start;flex-wrap:wrap}.choose-imgae-list li{margin:6px;border:1px solid #d9d9d9}.choose-imgae-list .img-selected{font-family:iconfont!important;position:relative;color:#52c41a;font-size:20px}.choose-imgae-list .img-selected:after{position:absolute;right:0;bottom:0;content:"\\E689";display:block;height:20px;width:20px;line-height:20px}',""])},794:function(e,t,a){var r=a(793);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(49)(r,n);r.locals&&(e.exports=r.locals)},795:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(a(643)),n=p(a(85)),l=p(a(6)),u=p(a(15)),i=p(a(4)),s=p(a(7));a(645);var d=a(1),o=p(d);function p(e){return e&&e.__esModule?e:{default:e}}a(794);var c=function(e){function t(e){(0,l.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){var t=a.state.value;a.setState({visible:!1},a.triggerChange(t))},a.handleCancel=function(e){var t=a.state,r=t.listData,n=t.value;n=a.value,r=a.updateListData(r,n),a.setState({visible:!1,value:n,listData:r})},a.handleSelect=function(e){var t=a.state,r=t.listData,n=t.value;n=e.value,r=a.updateListData(r,n),a.setState({listData:r,value:n})},a.creatImgList=function(e){return e.map(function(e,t){var r=e.name,n=e.src,l=e.selected;return o.default.createElement("li",{className:l?"img-selected":""},o.default.createElement("span",{title:r,onClick:a.handleSelect.bind(a,e)},o.default.createElement("img",{width:"80",src:n,alt:r})))})},a.triggerChange=function(e){var t=a.props.onChange;t&&t(e)},a.updateListData=function(e,t){return e.map(function(e,a){return e.selected=!1,e.value===t&&(e.selected=!0),e})},a.state={visible:!1,selected:"",listData:[],value:""},a.value="",a}return(0,s.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.data,a=e.value;this.value=a;var r=this.updateListData(t,a);this.setState({listData:r,value:a})}},{key:"render",value:function(){var e=this.state,t=e.listData,a=e.value;return o.default.createElement("div",{className:"choose-imgae"},o.default.createElement("div",{className:"choose-btn",style:a.length>0?{background:"url("+a+") no-repeat 0px 0px","background-size":"contain"}:null,onClick:this.showModal},o.default.createElement("i",{className:"iconfont icon-tianjiayingyong font-size-80"})),o.default.createElement(r.default,{title:this.props.title,mask:!1,visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},o.default.createElement("ul",{className:"choose-imgae-list"},this.creatImgList(t))))}}]),t}(d.Component);t.default=c},796:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=k(a(654)),n=k(a(653)),l=k(a(626)),u=k(a(625)),i=k(a(85)),s=k(a(6)),d=k(a(15)),o=k(a(4)),p=k(a(7)),c=k(a(261)),f=k(a(650));a(652),a(651),a(260),a(627),a(262),a(649);var m=a(1),g=k(m),h=a(93),D=k(a(0)),y=(k(a(622)),a(630)),v=k(a(795)),b=k(a(258)),E=k(a(792));function k(e){return e&&e.__esModule?e:{default:e}}var w=f.default.Item,x=c.default.Option,T=[{name:"img1",value:"/nccloud/resources/workbench/assets/images/img1.png",src:"assets/images/img1.png"},{name:"img2",value:"/nccloud/resources/workbench/assets/images/img2.png",src:"assets/images/img2.png"},{name:"img3",value:"/nccloud/resources/workbench/assets/images/img3.png",src:"assets/images/img3.png"},{name:"img4",value:"/nccloud/resources/workbench/assets/images/img4.png",src:"assets/images/img4.png"},{name:"img5",value:"/nccloud/resources/workbench/assets/images/img5.png",src:"assets/images/img5.png"},{name:"img6",value:"/nccloud/resources/workbench/assets/images/img6.png",src:"assets/images/img6.png"}],_=void 0;var A=function(e){function t(e,a){(0,s.default)(this,t);var r=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,a));return r.optionShow=function(e,t){var a=e.find(function(e){return e.value===t});if(a)return a.text},r.getOptionsData=function(e){var t=r.state.DOMDATA;(0,b.default)({url:"/nccloud/platform/appregister/queryorgtype.do",success:function(a){var n=a.data;if(n.success&&n.data){var l=n.data.rows;l=l.map(function(e,t){return{value:e.refpk,text:e.refname}}),t.map(function(t,a){return t.code===e&&(t.options=l),t}),r.setState({DOMDATA:t})}}})},r.createOption=function(e){return e.map(function(e,t){return g.default.createElement(x,{value:e.value},e.text)})},r.handleSearch=function(e){var t,a;r.props.form.setFieldsValue({mdid:e}),t=e,a=function(e){var t=r.state.DOMDATA;e=e.map(function(e,t){return{value:e.refpk,text:e.refname+" "+e.refcode}}),t.map(function(t,a){return"mdid"===t.code&&(t.options=e),t}),r.setState({DOMDATA:t})},_&&(clearTimeout(_),_=null),t,_=setTimeout(function(){(0,b.default)({url:"/nccloud/platform/appregister/querymdid.do",data:{search_content:t},success:function(e){var t=e.data;t.success&&t.data&&a(t.data.rows)}})},300)},r.createDom=function(e,t){var a=r.props.form.getFieldDecorator,n=r.props.billStatus,i=n.isEdit,s=n.isNew,d=e.lable,o=e.type,p=e.code,f=e.required,m=e.check;switch(o){case"select":return"target_path"===p?i?s?null:g.default.createElement(w,{label:d,hasFeedback:!0},a(p,{initialValue:t[p],rules:[{required:f,message:"请选择"+d}]})(g.default.createElement(c.default,{placeholder:"请选择"+d},r.createOption(e.options)))):g.default.createElement(w,{label:d},g.default.createElement("span",{className:"ant-form-text"},r.optionShow(e.options,t[p]))):i?g.default.createElement(w,{label:d,hasFeedback:!0},a(p,{initialValue:t[p],rules:[{required:f,message:"请选择"+d}]})(g.default.createElement(c.default,{placeholder:"请选择"+d},r.createOption(e.options)))):g.default.createElement(w,{label:d},g.default.createElement("span",{className:"ant-form-text"},r.optionShow(e.options,t[p])));case"search":return i?g.default.createElement(w,{label:d,hasFeedback:!0},a(p,{initialValue:t[p],rules:[{required:f,message:e.placeholder?e.placeholder:"请选择"+d}]})(g.default.createElement(c.default,{placeholder:e.placeholder?e.placeholder:"请选择"+d,mode:"combobox",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onChange:r.handleSearch},r.createOption(e.options)))):g.default.createElement(w,{label:d},g.default.createElement("span",{className:"ant-form-text"},t[p]));case"checkbox":return g.default.createElement(w,null,a(p,{valuePropName:"checked",initialValue:t[p]})(g.default.createElement(u.default,{disabled:!i},d)));case"chooseImage":return i?g.default.createElement(w,{label:d},a(p,{initialValue:t[p],rules:[{required:f,message:e.placeholder?e.placeholder:"请选择"+d}]})(g.default.createElement(v.default,{data:T,title:"图标选择"}))):g.default.createElement(w,{label:d},g.default.createElement("span",{className:"ant-form-text"},t[p]));default:return i?g.default.createElement(w,{label:d},a(p,{initialValue:t[p]?t[p]+"":"",rules:[{required:f,message:"请输入"+d},{validator:m||null}]})(g.default.createElement(l.default,{placeholder:"请输入"+d}))):g.default.createElement(w,{label:d},g.default.createElement("span",{className:"ant-form-text"},t[p]))}},r.getFromData=function(){var e=r.props.form,t=e.getFieldsValue,a=!1;return(0,e.validateFields)(function(e,t){e||(a=!0)}),a?t():null},r.state={DOMDATA:[{lable:"应用编码",type:"input",code:"code",required:!0,check:function(e,t,a){t===r.props.parentData?a("不能与父节点编码重复"):a()}},{lable:"应用名称",type:"input",code:"name",required:!0},{lable:"组织类型",type:"select",code:"orgtypecode",required:!0,options:[]},{lable:"功能点类型",type:"select",code:"funtype",required:!0,options:[{value:0,text:"业务类应用"},{value:1,text:"管理类应用"},{value:2,text:"系统类应用"},{value:3,text:"管理+业务类应用"}]},{lable:"应用类型",type:"select",code:"apptype",required:!0,options:[{value:1,text:"小应用"},{value:2,text:"小部件"}]},{lable:"应用宽",type:"input",code:"width",required:!0},{lable:"应用高",type:"input",code:"height",required:!0},{lable:"关联元数据ID",type:"search",code:"mdid",required:!1,placeholder:"请输入元数据名称过滤",options:[]},{lable:"所属集团",type:"input",code:"pk_group",required:!1},{lable:"是否启用",type:"checkbox",code:"isenable",required:!1},{lable:"是否加载占用",type:"checkbox",code:"uselicense_load",required:!1},{lable:"是否CA用户可用",type:"checkbox",code:"iscauserusable",required:!1},{lable:"帮助文件名",type:"input",code:"help_name",required:!1},{lable:"应用描述",type:"input",code:"app_desc",required:!1,md:24,lg:24,xl:24},{lable:"跳转路径",type:"input",code:"target_path",required:!0,md:24,lg:24,xl:24},{lable:"图标路径",type:"chooseImage",code:"image_src",required:!0,md:24,lg:24,xl:24}]},r}return(0,p.default)(t,e),(0,d.default)(t,[{key:"getFields",value:function(e){var t=this,a=this.state.DOMDATA;if(!e.systypename){var r=[];return a.map(function(a,l){a.lable;var u=a.md,i=void 0===u?24:u,s=a.lg,d=void 0===s?12:s,o=a.xl,p=void 0===o?8:o;r.push(g.default.createElement(n.default,{md:i,lg:d,xl:p,key:l},t.createDom(a,e)))}),r}}},{key:"componentWillMount",value:function(){this.props.getFromDataFunc(this.getFromData),this.getOptionsData("orgtypecode")}},{key:"render",value:function(){return g.default.createElement("div",null,g.default.createElement(f.default,{className:"from-card"},g.default.createElement(r.default,{gutter:24},this.getFields(this.props.nodeData))),g.default.createElement("div",{style:{"margin-top":"16px",background:"#ffffff",padding:"10px","border-radius":"6px"}},g.default.createElement(E.default,null)))}}]),t}(m.Component);(A=f.default.create()(A)).PropTypes={nodeData:D.default.object.isRequired,billStatus:D.default.object.isRequired,getFromDataFunc:D.default.func.isRequired,parentData:D.default.string.isRequired},t.default=(0,h.connect)(function(e){var t=e.AppRegisterData;return{nodeData:t.nodeData,billStatus:t.billStatus,parentData:t.parentData}},{getFromDataFunc:y.getFromDataFunc})(A)},797:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=v(a(654)),n=v(a(653)),l=v(a(626)),u=v(a(625)),i=v(a(85)),s=v(a(6)),d=v(a(15)),o=v(a(4)),p=v(a(7)),c=v(a(261)),f=v(a(650));a(652),a(651),a(260),a(627),a(262),a(649);var m=a(1),g=v(m),h=a(93),D=v(a(0)),y=a(630);function v(e){return e&&e.__esModule?e:{default:e}}var b=f.default.Item,E=c.default.Option,k=function(e){function t(e,a){(0,s.default)(this,t);var r=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,a));return r.createDom=function(e,t){var a=r.props.form.getFieldDecorator,n=r.props.billStatus.isEdit,i=e.lable,s=e.type,d=e.code,o=e.required,p=e.check;switch(s){case"select":return n?g.default.createElement(b,{label:i,hasFeedback:!0},a(d,{initialValue:t[d],rules:[{required:o,message:"请选择"+i}]})(g.default.createElement(c.default,{placeholder:"请选择"+i},g.default.createElement(E,{value:"0"},"全局"),g.default.createElement(E,{value:"1"},"集团")))):g.default.createElement(b,{label:i},g.default.createElement("span",{className:"ant-form-text"},t[d]));case"checkbox":return g.default.createElement(b,null,a(d,{valuePropName:"checked",initialValue:t[d]})(g.default.createElement(u.default,{disabled:!n},i)));default:return n?g.default.createElement(b,{label:i},a(d,{initialValue:t[d],rules:[{required:o,message:"请输入"+i},{validator:p||null}]})(g.default.createElement(l.default,{placeholder:"请输入"+i}))):g.default.createElement(b,{label:i},g.default.createElement("span",{className:"ant-form-text"},t[d]))}},r.getFromData=function(){var e=r.props.form,t=e.getFieldsValue,a=!1;return(0,e.validateFields)(function(e,t){e||(a=!0)}),a?t():null},r.state={DOMDATA:[{lable:"应用编码",type:"input",code:"code",required:!0,check:function(e,t,a){t===r.props.parentData?a("不能与父节点编码重复"):a()}},{lable:"应用名称",type:"input",code:"name",required:!0},{lable:"应用描述",type:"input",code:"app_desc",required:!1,md:24,lg:24,xl:12},{lable:"帮助文件名",type:"input",code:"help_name",required:!1,md:24,lg:24,xl:12}]},r}return(0,p.default)(t,e),(0,d.default)(t,[{key:"getFields",value:function(e){var t=this,a=[];return this.state.DOMDATA.map(function(r,l){r.lable;var u=r.md,i=void 0===u?24:u,s=r.lg,d=void 0===s?12:s,o=r.xl,p=void 0===o?12:o;a.push(g.default.createElement(n.default,{md:i,lg:d,xl:p,key:l},t.createDom(r,e)))}),a}},{key:"componentWillMount",value:function(){this.props.getFromDataFunc(this.getFromData)}},{key:"render",value:function(){return g.default.createElement(f.default,{className:"from-card"},g.default.createElement(r.default,{gutter:24},this.getFields(this.props.nodeData)))}}]),t}(m.Component);(k=f.default.create()(k)).PropTypes={updateTreeData:D.default.func.isRequired,nodeData:D.default.object.isRequired,billStatus:D.default.object.isRequired,getFromDataFunc:D.default.func.isRequired,parentData:D.default.string.isRequired},t.default=(0,h.connect)(function(e){var t=e.AppRegisterData;return{nodeData:t.nodeData,updateTreeData:t.updateTreeData,billStatus:t.billStatus,parentData:t.parentData}},{getFromDataFunc:y.getFromDataFunc})(k)},813:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=b(a(654)),n=b(a(653)),l=b(a(626)),u=b(a(625)),i=b(a(85)),s=b(a(6)),d=b(a(15)),o=b(a(4)),p=b(a(7)),c=b(a(261)),f=b(a(650));a(652),a(651),a(260),a(627),a(262),a(649);var m=a(1),g=b(m),h=a(93),D=b(a(0)),y=a(630),v=b(a(258));function b(e){return e&&e.__esModule?e:{default:e}}var E=f.default.Item,k=c.default.Option,w=function(e){function t(e,a){(0,s.default)(this,t);var r=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,a));return r.getOptionsData=function(e){var t=r.state.DOMDATA;(0,v.default)({url:"/nccloud/platform/appregister/queryorgtype.do",success:function(a){var n=a.data;if(n.success&&n.data){var l=n.data.rows;l=l.map(function(e,t){return{value:e.refpk,text:e.refname}}),t.map(function(t,a){return t.code===e&&(t.options=l),t}),r.setState({DOMDATA:t})}}})},r.createOption=function(e){return e.map(function(e,t){return g.default.createElement(k,{value:e.value},e.text)})},r.optionShow=function(e,t){var a=e.find(function(e){return e.value===t});if(a)return a.text},r.createDom=function(e,t){var a=r.props.form.getFieldDecorator,n=r.props.billStatus.isEdit,i=e.lable,s=e.type,d=e.code,o=e.required,p=e.check;switch(s){case"select":return n?g.default.createElement(E,{label:i,hasFeedback:!0},a(d,{initialValue:t[d],rules:[{required:o,message:"请选择"+i}]})(g.default.createElement(c.default,{placeholder:"请选择"+i},r.createOption(e.options)))):g.default.createElement(E,{label:i},g.default.createElement("span",{className:"ant-form-text"},r.optionShow(e.options,t[d])));case"checkbox":return g.default.createElement(E,null,a(d,{valuePropName:"checked",initialValue:t[d]})(g.default.createElement(u.default,{disabled:!n},i)));default:return n?g.default.createElement(E,{label:i},a(d,{initialValue:t[d],rules:[{required:o,message:"请输入"+i},{validator:p||null}]})(g.default.createElement(l.default,{placeholder:"请输入"+i}))):g.default.createElement(E,{label:i},g.default.createElement("span",{className:"ant-form-text"},t[d]))}},r.getFromData=function(){var e=r.props.form,t=e.getFieldsValue,a=!1;return(0,e.validateFields)(function(e,t){e||(a=!0)}),a?t():null},r.state={DOMDATA:[{lable:"模块编码",type:"input",code:"systypecode",required:!0},{lable:"模块号",type:"input",code:"moduleid",required:!0,check:function(e,t,a){t===r.props.parentData?a("不能与父节点编码重复"):a()}},{lable:"模块名称",type:"input",code:"systypename",required:!0},{lable:"对应模块号",type:"input",code:"devmodule",required:!1},{lable:"应用范围",type:"select",code:"appscope",required:!1,options:[{value:0,text:"全局"},{value:1,text:"集团"}]},{lable:"组织类型",type:"select",code:"orgtypecode",required:!1,options:[]},{lable:"多语字段",type:"input",code:"resid",required:!1},{lable:"是否支持开关帐设置",type:"checkbox",code:"supportcloseaccbook",required:!1},{lable:"是否发送会计平台",type:"checkbox",code:"isaccount",required:!1}]},r}return(0,p.default)(t,e),(0,d.default)(t,[{key:"getFields",value:function(e){var t=this,a=[];return this.state.DOMDATA.map(function(r,l){r.lable;var u=r.md,i=void 0===u?24:u,s=r.lg,d=void 0===s?12:s,o=r.xl,p=void 0===o?8:o;a.push(g.default.createElement(n.default,{md:i,lg:d,xl:p,key:l},t.createDom(r,e)))}),a}},{key:"componentDidMount",value:function(){this.props.getFromDataFunc(this.getFromData),this.getOptionsData("orgtypecode")}},{key:"render",value:function(){return g.default.createElement(f.default,{className:"from-card"},g.default.createElement(r.default,{gutter:24},this.getFields(this.props.nodeData)))}}]),t}(m.Component);(w=f.default.create()(w)).PropTypes={updateTreeData:D.default.func.isRequired,nodeData:D.default.object.isRequired,billStatus:D.default.object.isRequired,getFromDataFunc:D.default.func.isRequired,parentData:D.default.string.isRequired},t.default=(0,h.connect)(function(e){var t=e.AppRegisterData;return{nodeData:t.nodeData,updateTreeData:t.updateTreeData,billStatus:t.billStatus,parentData:t.parentData}},{getFromDataFunc:y.getFromDataFunc})(w)},825:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=D(a(268)),n=D(a(85)),l=D(a(6)),u=D(a(15)),i=D(a(4)),s=D(a(7)),d=D(a(626)),o=D(a(751));a(260),a(823);var p=a(1),c=D(p),f=a(93),m=D(a(0)),g=a(630),h=(D(a(622)),D(a(258)));D(a(820));function D(e){return e&&e.__esModule?e:{default:e}}var y=o.default.TreeNode,v=d.default.Search,b=[{key:"0",systypename:"应用节点",moduleid:"",text:"应用节点",children:[]}],E=function(e){function t(e,a){(0,l.default)(this,t);var u=(0,i.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e,a));return u.reqTreeData=function(){(0,h.default)({url:"/nccloud/platform/appregister/querymodules.do",success:function(e){var t=e.data;t.success&&t.data.length>0&&u.setState({treeDataArray:t.data},u.restoreTreeData)}})},u.addTreeData=function(e){var t=u.state,a=t.treeDataArray,r=t.selectedKeys;r=[],a.push(e),r.push(e.moduleid),u.setState({treeDataArray:a,selectedKeys:r},u.restoreTreeData)},u.delTreeData=function(e){var t=u.state,a=t.treeDataArray,r=t.selectedKeys;r=[],a=a.filter(function(t){return t.moduleid!==e.moduleid}),u.setState({treeDataArray:a,selectedKeys:r},u.restoreTreeData)},u.updateNodeData=function(e){var t=u.state.treeDataArray;t=t.map(function(t,a){return t.moduleid===e.moduleid&&(t=e),t}),u.setState({treeDataArray:t},u.restoreTreeData)},u.restoreTreeData=function(){var e=u.state,t=e.treeData,a=e.treeDataArray,r=k(a),n=r.treeArray,l=r.treeObj;for(var i in l)if(l.hasOwnProperty(i)){var s=l[i];s.length>0&&(l[i]=s.map(function(e,t){return l[e.moduleid]?e.children=l[e.moduleid]:l[e.systypecode]&&(e.children=l[e.systypecode]),e}))}n=n.map(function(e,t){return l[e.moduleid]&&(e.children=l[e.moduleid]),e}),t[0].children=r.treeArray,t=w(t),u.setState({treeData:t})},u.onExpand=function(e){u.setState({expandedKeys:e,autoExpandParent:!1})},u.onChange=function(e){var t=e.target.value;u.setState({expandedKeys:expandedKeys,searchValue:t,autoExpandParent:!0})},u.onSelect=function(e,t){var a=u.state.selectedKeys;if(a=e,u.setState({selectedKeys:a}),0!==e.length)if(u.props.setBillStatus({isNew:!1,isEdit:!1}),"0"===(e=e[e.length-1]))u.props.setNodeData(""),u.props.setOpType(""),u.props.setParentData(null);else{var n=u.state.treeDataArray.find(function(t){if(t.key===e)return t});n.moduleid.length<=4?u.props.setOpType("module"):(0,h.default)({url:"/nccloud/platform/appregister/query.do",data:{pk_appregister:e},success:function(e){var t=e.data;if(t.success&&t.data){n.parentcode.length>4?u.props.setOpType("app"):u.props.setOpType("classify");var a=t.data,r=a.appRegisterVO,l=(a.appButtonVOs,a.appParamVOs);u.props.setAppParamData(l),u.props.setNodeData(r)}}}),(n=(0,r.default)({},n)).children&&delete n.children,n.parentcode?u.props.setParentData(n.parentcode):u.props.setParentData(null),u.props.setNodeData(n),u.props.updateTreeData(u.updateNodeData)}},u.state={expandedKeys:["0"],selectedKeys:[],treeDataArray:[],treeData:[],searchValue:"",autoExpandParent:!0},u}return(0,s.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.state.treeData;e=b,this.setState({treeData:e},this.reqTreeData),this.props.addTreeData(this.addTreeData),this.props.delTreeData(this.delTreeData)}},{key:"render",value:function(){var e=this.state,t=e.expandedKeys,a=e.searchValue,r=e.autoExpandParent,n=e.selectedKeys,l=e.treeData;return c.default.createElement("div",null,c.default.createElement(v,{style:{marginBottom:8},placeholder:"Search",onChange:this.onChange}),l.length>0&&l[0].children.length>0&&c.default.createElement(o.default,{showLine:!0,onExpand:this.onExpand,expandedKeys:t,onSelect:this.onSelect,autoExpandParent:r,selectedKeys:n},function e(t){return t.map(function(t){var r=t.text,n=t.key,l=t.children,u=r.indexOf(a),i=r.substr(0,u),s=r.substr(u+a.length),d=u>-1?c.default.createElement("span",null,i,c.default.createElement("span",{style:{color:"#f50"}},a),s):c.default.createElement("div",null,c.default.createElement("span",null," ",r," "));return l?c.default.createElement(y,{key:n,title:d}," ",e(l)," "):c.default.createElement(y,{key:n,title:d})})}(l)))}}]),t}(p.Component),k=function(e){var t=[],a={};return e.map(function(e,r){var n=e.parentcode,l=e.moduleid,u=e.systypename,i=e.systypecode;e.children&&delete e.children,l.length>4?e.text=i+" "+u:e.text=l+" "+u,e.key=l,n?(a[n]||(a[n]=[]),a[n].push(e)):(e.children=[],t.push(e))}),{treeArray:t,treeObj:a}},w=function e(t){return t.map(function(t,a){return(t=(0,r.default)({},t)).children?(t.isLeaf=!1,t.children=e(t.children)):t.isLeaf=!0,t})};E.PropTypes={setNodeData:m.default.func.isRequired,updateTreeData:m.default.func.isRequired,setOpType:m.default.func.isRequired,setBillStatus:m.default.func.isRequired,setParentData:m.default.func.isRequired,setAppParamData:m.default.func.isRequired,addTreeData:m.default.func.isRequired,delTreeData:m.default.func.isRequired},t.default=(0,f.connect)(function(e){return{}},{setNodeData:g.setNodeData,updateTreeData:g.updateTreeData,setOpType:g.setOpType,setBillStatus:g.setBillStatus,setParentData:g.setParentData,setAppParamData:g.setAppParamData,addTreeData:g.addTreeData,delTreeData:g.delTreeData})(E)}}]);